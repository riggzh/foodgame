function init(e){var i=!1,c=!1;window.location.search&&("0d9753e2fe5a15db2668f70016e565ca7d717c67278ea6c689881ac4"==lcode(window.location.search)&&(i=!0),"12efa26026978758fbbbd57a70747902dba7f1a434d8dbb8cde98373"==lcode(window.location.search)&&(c=!0));var l=generateData(e,i);initRecipeTable(l,i),initChefTable(l),initKitchenwareTable(l),(i||c)&&(initCalTables(e,l),$(".nav-tabs li").removeClass("hidden")),initInfo(l),$(".loading").addClass("hidden"),$(".main-function").removeClass("hidden")}function initRecipeTable(e,i){var c=[{data:"recipeId"},{data:"name"},{data:{_:"fire",display:"fireDisp"}},{data:"stirfry"},{data:"boil"},{data:"cut"},{data:"fry"},{data:"roast"},{data:"steam"},{data:{_:"ingredientsVal",display:"ingredientsDisp"}},{data:"price"},{data:{_:"time",display:"timeDisp"}},{data:"total"},{data:"totalPrice"},{data:{_:"totalTime",display:"totalTimeDisp"}},{data:"efficiency"},{data:"ingredientsEff"},{data:"origin"},{data:"unlock"},{data:"guestsDisp"},{data:{_:"levelGuestsVal",display:"levelGuestsDisp"}},{data:"godRune"},{data:"quality"}];for(j in e.chefs)$("#chk-recipe-show-chef").append("<option value='"+j+"'>"+e.chefs[j].name+"</option>"),$("#recipe-table thead tr").append("<th>"+e.chefs[j].name+"</th>").append("<th>效率</th>"),c.push({data:{_:"chefs."+j+".qualityVal",display:"chefs."+j+".qualityDisp"}}),c.push({data:"chefs."+j+".efficiency"});var l=$("#recipe-table").DataTable({data:e.recipes,columns:c,language:{search:"查找:",lengthMenu:"一页显示 _MENU_ 个",zeroRecords:"没有找到",info:"第 _PAGE_ 页 共 _PAGES_ 页 _TOTAL_ 个菜谱",infoEmpty:"没有数据",infoFiltered:"(从 _MAX_ 个菜谱中过滤)"},pagingType:"numbers",lengthMenu:[[10,20,50,100,-1],[10,20,50,100,"所有"]],pageLength:20,dom:"<'row'<'col-sm-4'l><'col-sm-4 text-center'i><'col-sm-4'<'search-box'>>><'row'<'col-sm-12'tr>><'row'<'col-sm-12'p>>"});$("#pane-recipes div.search-box").html('<label>查找:<input type="search" class="form-control input-sm" placeholder="菜名 材料 贵客 符文"></label>'),$.fn.dataTableExt.afnFiltering.push(function(e,i,c){if(e.nTable!=document.getElementById("recipe-table"))return!0;var l=$("#chk-recipe-fire-0").prop("checked"),a=$("#chk-recipe-fire-1").prop("checked"),t=$("#chk-recipe-fire-2").prop("checked"),s=$("#chk-recipe-fire-3").prop("checked"),r=$("#chk-recipe-fire-4").prop("checked"),n=$("#chk-recipe-fire-5").prop("checked"),o=Math.floor(i[2])||0;return!!(l&&0==o||a&&1==o||t&&2==o||s&&3==o||r&&4==o||n&&5==o)}),$.fn.dataTableExt.afnFiltering.push(function(e,i,c){return e.nTable!=document.getElementById("recipe-table")||!!($("#chk-recipe-skill-stirfry").prop("checked")&&(Math.floor(i[3])||0)>0||$("#chk-recipe-skill-boil").prop("checked")&&(Math.floor(i[4])||0)>0||$("#chk-recipe-skill-cut").prop("checked")&&(Math.floor(i[5])||0)>0||$("#chk-recipe-skill-fry").prop("checked")&&(Math.floor(i[6])||0)>0||$("#chk-recipe-skill-roast").prop("checked")&&(Math.floor(i[7])||0)>0||$("#chk-recipe-skill-steam").prop("checked")&&(Math.floor(i[8])||0)>0||$("#chk-recipe-skill-unknown").prop("checked")&&0==(Math.floor(i[3])||0)&&0==(Math.floor(i[4])||0)&&0==(Math.floor(i[5])||0)&&0==(Math.floor(i[6])||0)&&0==(Math.floor(i[7])||0)&&0==(Math.floor(i[8])||0))}),$.fn.dataTableExt.afnFiltering.push(function(e,i,c){if(e.nTable!=document.getElementById("recipe-table"))return!0;var l=Math.floor($("#input-recipe-price").val()),a=Math.floor(i[10])||0;return""==$("#input-recipe-price").val()||l<a}),$.fn.dataTableExt.afnFiltering.push(function(e,i,c){if(e.nTable!=document.getElementById("recipe-table"))return!0;var l=$("#chk-recipe-guest").prop("checked"),a=i[19];return!!(!l||l&&a)}),$.fn.dataTableExt.afnFiltering.push(function(e,i,c){if(e.nTable!=document.getElementById("recipe-table"))return!0;for(var l=$("#input-recipe-guest-rune").val(),a=[20,21],t=0,s=a.length;t<s;t++)if(i[a[t]].indexOf(l)!==-1)return!0;return!1}),$.fn.dataTableExt.afnFiltering.push(function(e,i,c){if(e.nTable!=document.getElementById("recipe-table"))return!0;for(var l=$("#pane-recipes .search-box input").val(),a=[0,1,9,19],t=0,s=a.length;t<s;t++)if(i[a[t]].indexOf(l)!==-1)return!0;return!1}),$("#chk-recipe-show-chef").multiselect({templates:{filter:'<li class="multiselect-item filter"><div class="input-group"><span class="input-group-addon"><i class="glyphicon glyphicon-search"></i></span><input class="form-control multiselect-search" type="text"></div><a class="deselect-all">清空</a></li>'},enableFiltering:!0,filterPlaceholder:"查找",numberDisplayed:1,allSelectedText:"厨师",nonSelectedText:"厨师",nSelectedText:"厨师",maxHeight:200,onChange:function(c,a,t){initRecipeShow(l,e,i)}}),$(".chk-recipe-show-chef-wrapper .deselect-all").click(function(){$("#chk-recipe-show-chef").multiselect("deselectAll",!1),$("#chk-recipe-show-chef").multiselect("updateButtonText"),initRecipeShow(l,e,i)}),$(".chk-recipe-show").click(function(){initRecipeShow(l,e,i)}),$("#chk-recipe-show-all").click(function(){$(".btn:not(.hidden) .chk-recipe-show:checked").length==$(".btn:not(.hidden) .chk-recipe-show").length?$(".btn:not(.hidden) .chk-recipe-show").prop("checked",!1):$(".btn:not(.hidden) .chk-recipe-show").prop("checked",!0),initRecipeShow(l,e,i)}),$('.chk-recipe-fire input[type="checkbox"]').click(function(){l.draw()}),$(".chk-recipe-skill").click(function(){$(this).prop("checked")&&$("#chk-recipe-single-skill").prop("checked")&&$(".chk-recipe-skill").not(this).prop("checked",!1),l.draw()}),$("#chk-recipe-single-skill").change(function(){$(this).prop("checked")&&$(".chk-recipe-skill:checked").length>1&&($(".chk-recipe-skill").prop("checked",!1),l.draw())}),$("#chk-recipe-skill-all").click(function(){$("#chk-recipe-single-skill").prop("checked")&&$("#chk-recipe-single-skill").bootstrapToggle("off"),$(".chk-recipe-skill").prop("checked",!0),l.draw()}),$("#input-recipe-price").keyup(function(){l.draw()}),$("#input-recipe-guest-rune").keyup(function(){$("#chk-recipe-show-level-guest").prop("checked")||($("#chk-recipe-show-level-guest").prop("checked",!0),initRecipeShow(l,e,i)),l.draw()}),$("#chk-recipe-guest").click(function(){l.draw()}),$("#pane-recipes .search-box input").keyup(function(){l.draw()}),i&&($("#chk-recipe-show-origin").prop("checked",!1),$("#chk-recipe-show-quality").prop("checked",!0).parent(".btn").removeClass("hidden")),initRecipeShow(l,e,i)}function initChefTable(e){var i=[{data:{_:"chefId",display:"chefIdDisp"}},{data:"name"},{data:{_:"fire",display:"fireDisp"}},{data:"stirfry"},{data:"boil"},{data:"cut"},{data:"fry"},{data:"roast"},{data:"steam"},{data:{_:"specialSkillVal",display:"specialSkillDisp"}},{data:"meat"},{data:"wheat"},{data:"veg"},{data:"fish"},{data:"sex"},{data:"origin"}];for(j in e.recipes)$("#chk-chef-show-recipe").append("<option value='"+j+"'>"+e.recipes[j].name+"</option>"),$("#chef-table thead tr").append("<th>"+e.recipes[j].name+"</th>"),i.push({data:{_:"recipes."+j+".qualityVal",display:"recipes."+j+".qualityDisp"}});var c=$("#chef-table").DataTable({data:e.chefs,columns:i,language:{search:"查找:",lengthMenu:"一页显示 _MENU_ 个",zeroRecords:"没有找到",info:"第 _PAGE_ 页 共 _PAGES_ 页 _TOTAL_ 个厨师",infoEmpty:"没有数据",infoFiltered:"(从 _MAX_ 个厨师中过滤)"},pagingType:"numbers",lengthMenu:[[10,20,50,100,-1],[10,20,50,100,"所有"]],pageLength:20,dom:"<'row'<'col-sm-4'l><'col-sm-4 text-center'i><'col-sm-4'<'search-box'>>><'row'<'col-sm-12'tr>><'row'<'col-sm-12'p>>"});$("#pane-chefs div.search-box").html('<label>查找:<input type="search" class="form-control input-sm" placeholder="名字 技能 来源"></label>'),$.fn.dataTableExt.afnFiltering.push(function(e,i,c){if(e.nTable!=document.getElementById("chef-table"))return!0;var l=$("#chk-chef-fire-1").prop("checked"),a=$("#chk-chef-fire-2").prop("checked"),t=$("#chk-chef-fire-3").prop("checked"),s=$("#chk-chef-fire-4").prop("checked"),r=$("#chk-chef-fire-5").prop("checked"),n=Math.floor(i[2])||0;return!!(l&&1==n||a&&2==n||t&&3==n||s&&4==n||r&&5==n)}),$.fn.dataTableExt.afnFiltering.push(function(e,i,c){if(e.nTable!=document.getElementById("chef-table"))return!0;var l=Math.floor($("#input-chef-stirfry").val()),a=Math.floor(i[3])||0,t=Math.floor($("#input-chef-boil").val()),s=Math.floor(i[4])||0,r=Math.floor($("#input-chef-cut").val()),n=Math.floor(i[5])||0,o=Math.floor($("#input-chef-fry").val()),h=Math.floor(i[6])||0,d=Math.floor($("#input-chef-roast").val()),p=Math.floor(i[7])||0,f=Math.floor($("#input-chef-steam").val()),u=Math.floor(i[8])||0;return l<=a&&t<=s&&r<=n&&o<=h&&d<=p&&f<=u}),$.fn.dataTableExt.afnFiltering.push(function(e,i,c){if(e.nTable!=document.getElementById("chef-table"))return!0;var l=$("#chk-chef-sex-male").prop("checked"),a=$("#chk-chef-sex-female").prop("checked"),t=i[14];return!!(l&&"男"==t||a&&"女"==t)}),$.fn.dataTableExt.afnFiltering.push(function(e,i,c){if(e.nTable!=document.getElementById("chef-table"))return!0;for(var l=$("#pane-chefs .search-box input").val(),a=[1,9,15],t=0,s=a.length;t<s;t++)if(i[a[t]].indexOf(l)!==-1)return!0;return!1}),$("#chk-chef-show-recipe").multiselect({templates:{filter:'<li class="multiselect-item filter"><div class="input-group"><span class="input-group-addon"><i class="glyphicon glyphicon-search"></i></span><input class="form-control multiselect-search" type="text"></div><a class="deselect-all">清空</a></li>'},enableFiltering:!0,filterPlaceholder:"查找",numberDisplayed:1,allSelectedText:"菜谱",nonSelectedText:"菜谱",nSelectedText:"菜谱",maxHeight:200,onChange:function(i,l,a){initChefShow(c,e)}}),$(".chk-chef-show-recipe-wrapper .deselect-all").click(function(){$("#chk-chef-show-recipe").multiselect("deselectAll",!1),$("#chk-chef-show-recipe").multiselect("updateButtonText"),initChefShow(c,e)}),$(".chk-chef-show").click(function(){initChefShow(c,e)}),$("#chk-chef-show-all").click(function(){$(".chk-chef-show:checked").length==$(".chk-chef-show").length?$(".chk-chef-show").prop("checked",!1):$(".chk-chef-show").prop("checked",!0),initChefShow(c,e)}),$('.chk-chef-fire input[type="checkbox"]').click(function(){c.draw()}),$(".input-chef-skill").keyup(function(){c.draw()}),$("#btn-chef-skill-clear").click(function(){$(".input-chef-skill").val(""),c.draw()}),$('.chk-chef-sex input[type="checkbox"]').click(function(){c.draw()}),$("#pane-chefs .search-box input").keyup(function(){c.draw()}),initChefShow(c,e)}function initKitchenwareTable(e){var i=[{data:"kitchenwareId"},{data:"name"},{data:{_:"fire",display:"fireDisp"}},{data:{_:"skillVal",display:"skillDisp"}},{data:"origin"}],c=$("#kitchenware-table").DataTable({data:e.kitchenware,columns:i,language:{search:"查找:",lengthMenu:"一页显示 _MENU_ 个",zeroRecords:"没有找到",info:"第 _PAGE_ 页 共 _PAGES_ 页 _TOTAL_ 个厨具",infoEmpty:"没有数据",infoFiltered:"(从 _MAX_ 个厨具中过滤)"},pagingType:"numbers",lengthMenu:[[10,20,50,100,-1],[10,20,50,100,"所有"]],pageLength:20,dom:"<'row'<'col-sm-4'l><'col-sm-4 text-center'i><'col-sm-4'<'search-box'>>><'row'<'col-sm-12'tr>><'row'<'col-sm-12'p>>"});$("#pane-kitchenware div.search-box").html('<label>查找:<input type="search" class="form-control input-sm" placeholder="名字 技能 来源"></label>'),$.fn.dataTableExt.afnFiltering.push(function(e,i,c){if(e.nTable!=document.getElementById("kitchenware-table"))return!0;var l=i[3];return!!($("#chk-kitchenware-skill-stirfry-price").prop("checked")&&l.indexOf("炒类料理")>=0||$("#chk-kitchenware-skill-boil-price").prop("checked")&&l.indexOf("煮类料理")>=0||$("#chk-kitchenware-skill-cut-price").prop("checked")&&l.indexOf("切类料理")>=0||$("#chk-kitchenware-skill-fry-price").prop("checked")&&l.indexOf("炸类料理")>=0||$("#chk-kitchenware-skill-roast-price").prop("checked")&&l.indexOf("烤类料理")>=0||$("#chk-kitchenware-skill-steam-price").prop("checked")&&l.indexOf("蒸类料理")>=0||$("#chk-kitchenware-skill-meet-price").prop("checked")&&l.indexOf("肉类料理")>=0||$("#chk-kitchenware-skill-wheat-price").prop("checked")&&l.indexOf("面类料理")>=0||$("#chk-kitchenware-skill-veg-price").prop("checked")&&l.indexOf("蔬菜料理")>=0||$("#chk-kitchenware-skill-fish-price").prop("checked")&&l.indexOf("水产料理")>=0||$("#chk-kitchenware-skill-sell-price").prop("checked")&&l.indexOf("金币获得")>=0||$("#chk-kitchenware-skill-stirfry-skill").prop("checked")&&l.indexOf("炒技法")>=0||$("#chk-kitchenware-skill-boil-skill").prop("checked")&&l.indexOf("煮技法")>=0||$("#chk-kitchenware-skill-cut-skill").prop("checked")&&l.indexOf("切技法")>=0||$("#chk-kitchenware-skill-fry-skill").prop("checked")&&l.indexOf("炸技法")>=0||$("#chk-kitchenware-skill-roast-skill").prop("checked")&&l.indexOf("烤技法")>=0||$("#chk-kitchenware-skill-steam-skill").prop("checked")&&l.indexOf("蒸技法")>=0||$("#chk-kitchenware-skill-all-skill").prop("checked")&&l.indexOf("全技法")>=0||$("#chk-kitchenware-skill-guest").prop("checked")&&l.indexOf("稀有客人")>=0||$("#chk-kitchenware-skill-time").prop("checked")&&l.indexOf("开业时间")>=0||$("#chk-kitchenware-skill-ingredient-get").prop("checked")&&l.indexOf("素材获得")>=0||$("#chk-kitchenware-skill-meet-skill").prop("checked")&&l.indexOf("肉类采集")>=0||$("#chk-kitchenware-skill-wheat-skill").prop("checked")&&l.indexOf("面类采集")>=0||$("#chk-kitchenware-skill-veg-skill").prop("checked")&&l.indexOf("蔬菜采集")>=0||$("#chk-kitchenware-skill-fish-skill").prop("checked")&&l.indexOf("水产采集")>=0||$("#chk-kitchenware-skill-ingredient-skill").prop("checked")&&l.indexOf("全采集")>=0)}),$.fn.dataTableExt.afnFiltering.push(function(e,i,c){if(e.nTable!=document.getElementById("kitchenware-table"))return!0;for(var l=$("#pane-kitchenware .search-box input").val(),a=[1,3,4],t=0,s=a.length;t<s;t++)if(i[a[t]].indexOf(l)!==-1)return!0;return!1}),$(".chk-kitchenware-show").click(function(){initKitchenwareShow(c)}),$("#chk-kitchenware-show-all").click(function(){$(".chk-kitchenware-show:checked").length==$(".chk-kitchenware-show").length?$(".chk-kitchenware-show").prop("checked",!1):$(".chk-kitchenware-show").prop("checked",!0),initKitchenwareShow(c)}),$(".chk-kitchenware-skill").click(function(){$(this).prop("checked")&&$("#chk-kitchenware-single-skill").prop("checked")&&$(".chk-kitchenware-skill").not(this).prop("checked",!1),c.draw()}),$("#chk-kitchenware-single-skill").change(function(){$(this).prop("checked")&&$(".chk-kitchenware-skill:checked").length>1&&($(".chk-kitchenware-skill").prop("checked",!1),c.draw())}),$("#chk-kitchenware-skill-all").click(function(){$("#chk-kitchenware-single-skill").prop("checked")&&$("#chk-kitchenware-single-skill").bootstrapToggle("off"),$(".chk-kitchenware-skill").prop("checked",!0),c.draw()}),$("#pane-kitchenware .search-box input").keyup(function(){c.draw()}),initKitchenwareShow(c)}function initCalTables(e,i){initCalRecipesTable(i),initCalChefsTable(i),initCalIngredientsTable(i),initCalResultsTable(),$.fn.dataTable.ext.order["dom-selected"]=function(e,i){return this.api().column(i,{order:"index"}).nodes().map(function(e,i){return $(e).parent("tr").hasClass("selected")?"1":"0"})}}function initCalRecipesTable(e){var i=generateCalRecipeData(e),c=[{data:void 0,defaultContent:"",className:"select-checkbox",orderDataType:"dom-selected",width:"30px"},{data:"recipeId"},{data:"name"},{data:{_:"fire",display:"fireDisp"}},{data:"stirfry"},{data:"boil"},{data:"cut"},{data:"fry"},{data:"roast"},{data:"steam"},{data:{_:"ingredientsVal",display:"ingredientsDisp"}},{data:"price"},{data:"total"},{data:"totalPrice"},{data:"origin"},{data:"addition",className:"cal-td-input-addition",width:"38px"}];calRecipesTable=$("#cal-recipes-table").DataTable({data:i,columns:c,language:{search:"查找:",lengthMenu:"一页显示 _MENU_ 个",zeroRecords:"没有找到",info:"共 _MAX_ 个菜谱",infoEmpty:"没有数据",infoFiltered:"",select:{rows:{_:"选择了 %d 个菜谱",0:"选择了 %d 个菜谱",1:"选择了 %d 个菜谱"}}},pagingType:"numbers",lengthMenu:[[10,20,50,100,-1],[10,20,50,100,"所有"]],pageLength:20,dom:"<'row'<'col-sm-4'l><'col-sm-4 text-center'i><'col-sm-4'<'search-box'>>><'row'<'col-sm-12'tr>><'row'<'col-sm-12'p>>",select:{style:"multi",selector:"td.select-checkbox"},autoWidth:!1,createdRow:function(e,i,c){$(e).addClass("fire-"+i.fire)}}),$("#pane-cal-recipes div.search-box").html('<label>查找:<input type="search" class="form-control input-sm" placeholder="菜名 材料"></label>'),$.fn.dataTableExt.afnFiltering.push(function(e,i,c){if(e.nTable!=document.getElementById("cal-recipes-table"))return!0;for(var l=$("#pane-cal-recipes .search-box input").val(),a=[2,10],t=0,s=a.length;t<s;t++)if(i[a[t]].indexOf(l)!==-1)return!0;return!1}),calRecipesTable.MakeCellsEditable({columns:[15]}),$(".chk-cal-recipes-show").click(function(){initCalRecipesShow(calRecipesTable)}),$(".chk-cal-recipes-fire").click(function(){$("#chk-cal-recipes-fire-1").prop("checked")?calRecipesTable.rows(".fire-1").select():calRecipesTable.rows(".fire-1").deselect(),$("#chk-cal-recipes-fire-2").prop("checked")?calRecipesTable.rows(".fire-2").select():calRecipesTable.rows(".fire-2").deselect(),$("#chk-cal-recipes-fire-3").prop("checked")?calRecipesTable.rows(".fire-3").select():calRecipesTable.rows(".fire-3").deselect(),$("#chk-cal-recipes-fire-4").prop("checked")?calRecipesTable.rows(".fire-4").select():calRecipesTable.rows(".fire-4").deselect(),$("#chk-cal-recipes-fire-5").prop("checked")?calRecipesTable.rows(".fire-5").select():calRecipesTable.rows(".fire-5").deselect()}),$("#chk-cal-recipes-addition").change(function(){initCalRecipesShow(calRecipesTable),$(this).prop("checked")?$("#chk-cal-recipes-addition-wrapper").removeClass("hidden"):$("#chk-cal-recipes-addition-wrapper").addClass("hidden")}),$("#btn-cal-recipes-addition-clear").click(function(){calRecipesTable.rows().every(function(e,i,c){this.cell(e,".cal-td-input-addition").data("")})}),$("#btn-cal-recipes-addition-add").click(function(){var e=$("#select-cal-recipes-category").val(),i=Math.floor($("#input-cal-recipes-addition").val())||"";e&&calRecipesTable.rows().every(function(c,l,a){var t=this.data().categories;for(var s in t)t[s]==e&&this.cell(c,".cal-td-input-addition").data(i)})}),$("#pane-cal-recipes .search-box input").keyup(function(){calRecipesTable.draw()}),$("#btn-cal-recipes-select-all").click(function(){$('.chk-cal-recipes-fire input[type="checkbox"]').prop("checked",!0),calRecipesTable.rows().select()}),$("#btn-cal-recipes-deselect-all").click(function(){$('.chk-cal-recipes-fire input[type="checkbox"]').prop("checked",!1),calRecipesTable.rows().deselect()}),calRecipesTable.rows().select(),initCalRecipesShow(calRecipesTable)}function initCalChefsTable(e){var i=[{data:void 0,defaultContent:"",className:"select-checkbox",orderDataType:"dom-selected",width:"30px"},{data:{_:"chefId",display:"chefIdDisp"}},{data:"name"},{data:{_:"fire",display:"fireDisp"}},{data:"stirfry"},{data:"boil"},{data:"cut"},{data:"fry"},{data:"roast"},{data:"steam"},{data:{_:"specialSkillVal",display:"specialSkillDisp"}},{data:"sex"},{data:"origin"},{data:"addition",className:"cal-td-input-addition",width:"38px"}];calChefsTable=$("#cal-chefs-table").DataTable({data:e.chefs,columns:i,language:{search:"查找:",lengthMenu:"一页显示 _MENU_ 个",zeroRecords:"没有找到",info:"共 _MAX_ 个厨师",infoEmpty:"没有数据",infoFiltered:"",select:{rows:{_:"选择了 %d 个厨师",0:"选择了 %d 个厨师",1:"选择了 %d 个厨师"}}},pagingType:"numbers",lengthMenu:[[10,20,50,100,-1],[10,20,50,100,"所有"]],pageLength:20,dom:"<'row'<'col-sm-4'l><'col-sm-4 text-center'i><'col-sm-4'<'search-box'>>><'row'<'col-sm-12'tr>><'row'<'col-sm-12'p>>",select:{style:"multi",selector:"td.select-checkbox"},autoWidth:!1,createdRow:function(e,i,c){$(e).addClass("fire-"+i.fire),$(e).addClass("男"==i.sex?"sex-1":"sex-0")}}),$("#pane-cal-chefs div.search-box").html('<label>查找:<input type="search" class="form-control input-sm" placeholder="名字 性别"></label>'),$.fn.dataTableExt.afnFiltering.push(function(e,i,c){if(e.nTable!=document.getElementById("cal-chefs-table"))return!0;for(var l=$("#pane-cal-chefs .search-box input").val(),a=[2,11],t=0,s=a.length;t<s;t++)if(i[a[t]].indexOf(l)!==-1)return!0;return!1}),calChefsTable.MakeCellsEditable({columns:[13]}),$(".chk-cal-chefs-show").click(function(){initCalChefsShow(calChefsTable)}),$('.chk-cal-chefs-fire input[type="checkbox"], .chk-cal-chefs-sex input[type="checkbox"]').click(function(){var e=$("#chk-cal-chefs-fire-1").prop("checked"),i=$("#chk-cal-chefs-fire-2").prop("checked"),c=$("#chk-cal-chefs-fire-3").prop("checked"),l=$("#chk-cal-chefs-fire-4").prop("checked"),a=$("#chk-cal-chefs-fire-5").prop("checked"),t=$("#chk-cal-chefs-sex-male").prop("checked"),s=$("#chk-cal-chefs-sex-female").prop("checked");e&&t?calChefsTable.rows(".sex-1.fire-1").select():calChefsTable.rows(".sex-1.fire-1").deselect(),e&&s?calChefsTable.rows(".sex-0.fire-1").select():calChefsTable.rows(".sex-0.fire-1").deselect(),i&&t?calChefsTable.rows(".sex-1.fire-2").select():calChefsTable.rows(".sex-1.fire-2").deselect(),i&&s?calChefsTable.rows(".sex-0.fire-2").select():calChefsTable.rows(".sex-0.fire-2").deselect(),c&&t?calChefsTable.rows(".sex-1.fire-3").select():calChefsTable.rows(".sex-1.fire-3").deselect(),c&&s?calChefsTable.rows(".sex-0.fire-3").select():calChefsTable.rows(".sex-0.fire-3").deselect(),l&&t?calChefsTable.rows(".sex-1.fire-4").select():calChefsTable.rows(".sex-1.fire-4").deselect(),l&&s?calChefsTable.rows(".sex-0.fire-4").select():calChefsTable.rows(".sex-0.fire-4").deselect(),a&&t?calChefsTable.rows(".sex-1.fire-5").select():calChefsTable.rows(".sex-1.fire-5").deselect(),a&&s?calChefsTable.rows(".sex-0.fire-5").select():calChefsTable.rows(".sex-0.fire-5").deselect()}),$("#chk-cal-chefs-addition").change(function(){initCalChefsShow(calChefsTable),$(this).prop("checked")?$("#chk-cal-chefs-addition-wrapper").removeClass("hidden"):$("#chk-cal-chefs-addition-wrapper").addClass("hidden")}),$("#btn-cal-chefs-addition-clear").click(function(){calChefsTable.rows().every(function(e,i,c){this.cell(e,".cal-td-input-addition").data("")})}),$("#btn-cal-chefs-addition-add").click(function(){var e=$("#select-cal-chefs-sex").val(),i=Math.floor($("#input-cal-chefs-addition").val())||"";e&&calChefsTable.rows().every(function(c,l,a){this.data().sex==e&&this.cell(c,".cal-td-input-addition").data(i)})}),$("#pane-cal-chefs .search-box input").keyup(function(){calChefsTable.draw()}),$("#btn-cal-chefs-select-all").click(function(){$('.chk-cal-chefs-fire input[type="checkbox"]').prop("checked",!0),$('.chk-cal-chefs-sex input[type="checkbox"]').prop("checked",!0),calChefsTable.rows().select()}),$("#btn-cal-chefs-deselect-all").click(function(){$('.chk-cal-chefs-fire input[type="checkbox"]').prop("checked",!1),$('.chk-cal-chefs-sex input[type="checkbox"]').prop("checked",!1),calChefsTable.rows().deselect()}),calChefsTable.rows().select(),initCalChefsShow(calChefsTable)}function initCalIngredientsTable(e){var i=[{data:void 0,defaultContent:"",className:"select-checkbox",orderDataType:"dom-selected",width:"30px"},{data:"ingredientId"},{data:"name"},{data:{_:"fire",display:"fireDisp"}},{data:"origin"},{data:"addition",className:"cal-td-input-addition",width:"38px"}];calIngredientsTable=$("#cal-ingredients-table").DataTable({data:e.ingredients,columns:i,language:{search:"查找:",lengthMenu:"一页显示 _MENU_ 个",zeroRecords:"没有找到",info:"共 _MAX_ 个食材",infoEmpty:"没有数据",infoFiltered:"",select:{rows:{_:"选择了 %d 个食材",0:"选择了 %d 个食材",1:"选择了 %d 个食材"}}},pagingType:"numbers",lengthMenu:[[10,20,50,100,-1],[10,20,50,100,"所有"]],pageLength:20,dom:"<'row'<'col-sm-4'l><'col-sm-4 text-center'i><'col-sm-4'<'search-box'>>><'row'<'col-sm-12'tr>><'row'<'col-sm-12'p>>",select:{style:"multi",selector:"td.select-checkbox"},autoWidth:!1,createdRow:function(e,i,c){$(e).addClass("origin-"+i.originVal)}}),$("#pane-cal-ingredients div.search-box").html('<label>查找:<input type="search" class="form-control input-sm" placeholder="名字 来源"></label>'),$.fn.dataTableExt.afnFiltering.push(function(e,i,c){if(e.nTable!=document.getElementById("cal-ingredients-table"))return!0;for(var l=$("#pane-cal-ingredients .search-box input").val(),a=[2,4],t=0,s=a.length;t<s;t++)if(i[a[t]].indexOf(l)!==-1)return!0;return!1}),calIngredientsTable.MakeCellsEditable({columns:[5]}),$(".chk-cal-ingredients-show").click(function(){initCalIngredientsShow(calIngredientsTable)}),$('.chk-cal-ingredients-origin input[type="checkbox"]').click(function(){$("#chk-cal-ingredients-origin-greenhouse").prop("checked")?calIngredientsTable.rows(".origin-1").select():calIngredientsTable.rows(".origin-1").deselect(),$("#chk-cal-ingredients-origin-garden").prop("checked")?calIngredientsTable.rows(".origin-2").select():calIngredientsTable.rows(".origin-2").deselect(),$("#chk-cal-ingredients-origin-forest").prop("checked")?calIngredientsTable.rows(".origin-3").select():calIngredientsTable.rows(".origin-3").deselect(),$("#chk-cal-ingredients-origin-chicken").prop("checked")?calIngredientsTable.rows(".origin-4").select():calIngredientsTable.rows(".origin-4").deselect(),$("#chk-cal-ingredients-origin-pork").prop("checked")?calIngredientsTable.rows(".origin-5").select():calIngredientsTable.rows(".origin-5").deselect(),$("#chk-cal-ingredients-origin-beef").prop("checked")?calIngredientsTable.rows(".origin-6").select():calIngredientsTable.rows(".origin-6").deselect(),$("#chk-cal-ingredients-origin-wheat").prop("checked")?calIngredientsTable.rows(".origin-7").select():calIngredientsTable.rows(".origin-7").deselect(),$("#chk-cal-ingredients-origin-fish").prop("checked")?calIngredientsTable.rows(".origin-8").select():calIngredientsTable.rows(".origin-8").deselect()}),$("#chk-cal-ingredients-addition").change(function(){initCalIngredientsShow(calIngredientsTable),$(this).prop("checked")?$("#chk-cal-ingredients-addition-wrapper").removeClass("hidden"):$("#chk-cal-ingredients-addition-wrapper").addClass("hidden")}),$("#btn-cal-ingredients-addition-clear").click(function(){calIngredientsTable.rows().every(function(e,i,c){this.cell(e,".cal-td-input-addition").data("")})}),$("#btn-cal-ingredients-addition-add").click(function(){var e=$("#select-cal-ingredients-origin").val(),i=Math.floor($("#input-cal-ingredients-addition").val())||"";e&&calIngredientsTable.rows().every(function(c,l,a){this.data().origin==e&&this.cell(c,".cal-td-input-addition").data(i)})}),$("#pane-cal-ingredients .search-box input").keyup(function(){calIngredientsTable.draw()}),$("#btn-cal-ingredients-select-all").click(function(){$('.chk-cal-ingredients-origin input[type="checkbox"]').prop("checked",!0),calIngredientsTable.rows().select()}),$("#btn-cal-ingredients-deselect-all").click(function(){$('.chk-cal-ingredients-origin input[type="checkbox"]').prop("checked",!1),calIngredientsTable.rows().deselect()}),calIngredientsTable.rows().select(),initCalIngredientsShow(calIngredientsTable)}function initCalResultsTable(){var e=[{data:void 0,defaultContent:"",className:"select-checkbox",orderDataType:"dom-selected",width:"30px"},{data:"chef.name"},{data:{_:"chef.fire",display:"chef.fireDisp"}},{data:"chef.sex"},{data:"chef.stirfry"},{data:"chef.boil"},{data:"chef.cut"},{data:"chef.fry"},{data:"chef.roast"},{data:"chef.steam"},{data:"recipe.data.name"},{data:{_:"recipe.data.fire",display:"recipe.data.fireDisp"}},{data:"recipe.data.stirfry"},{data:"recipe.data.boil"},{data:"recipe.data.cut"},{data:"recipe.data.fry"},{data:"recipe.data.roast"},{data:"recipe.data.steam"},{data:{_:"recipe.data.ingredientsVal",display:"recipe.data.ingredientsDisp"}},{data:"recipe.data.price"},{data:"recipe.quantity"},{data:{_:"recipe.qualityVal",display:"recipe.qualityDisp"}},{data:{_:"recipe.qualityAddition",display:"recipe.qualityAdditionDisp"}},{data:{_:"recipe.skillAddition",display:"recipe.skillAdditionDisp"}},{data:{_:"recipe.otherAddition",display:"recipe.otherAdditionDisp"}},{data:"recipe.totalPrice"},{data:"recipe.realTotalPrice"},{data:"recipe.bonusScore"},{data:"recipe.totalScore"}],i=function(e,i,c){if(e.nTable!=document.getElementById("cal-results-table"))return!0;for(var l=$("#pane-cal-results .search-box input").val(),a=[1,10,18],t=0,s=a.length;t<s;t++)if(i[a[t]].indexOf(l)!==-1)return!0;return!1},c=function(e,i,c){if(e.nTable!=document.getElementById("cal-results-table"))return!0;if($("#chk-cal-results-show-selected").prop("checked")){var l=e.aoData[c].nTr;return!!$(l).hasClass("selected")}return!0};$(".btn-cal-results-cal").click(function(){var l="";if("btn-cal-results-cal-all"==this.id?l="all":"btn-cal-results-cal-optimal"==this.id?l="optimal":"btn-cal-results-cal-stop"==this.id&&(l="stop"),"stop"!=l&&($(".btn-cal-results-cal").prop("disabled",!0),$("#btn-cal-results-cal-stop").prop("disabled",!1),$(".cal-results-wrapper").addClass("hidden"),$(".cal-results-progress .progress-bar").css("width","0%"),$(".cal-results-progress .progress-bar span").text("预处理中"),$(".cal-results-progress").removeClass("hidden")),"undefined"!=typeof calWorker&&(calWorker.terminate(),calWorker=void 0),"stop"!=l){calWorker=new Worker("js/cal.js?v=1"),calWorker.onmessage=function(a){a.data.progress?($(".cal-results-progress .progress-bar").css("width",a.data.progress.value+"%"),$(".cal-results-progress .progress-bar span").text(a.data.progress.display)):a.data.menu&&($("#btn-cal-results-cal-stop").prop("disabled",!0),setTimeout(function(){$(".cal-results-progress .progress-bar span").text("加载中")},500),setTimeout(function(){calResultsTable&&($.fn.dataTableExt.afnFiltering.splice($.fn.dataTableExt.afnFiltering.indexOf(i),1),$.fn.dataTableExt.afnFiltering.splice($.fn.dataTableExt.afnFiltering.indexOf(c),1),calResultsTable.destroy()),calResultsTable=$("#cal-results-table").DataTable({data:a.data.menu,columns:e,language:{search:"查找:",lengthMenu:"一页显示 _MENU_ 个",zeroRecords:"没有找到",info:"共 _MAX_ 个",infoEmpty:"没有数据",infoFiltered:"",select:{rows:{_:"选择了 %d 个",0:"选择了 %d 个",1:"选择了 %d 个"}}},pagingType:"numbers",lengthMenu:[[10,20,50,100,-1],[10,20,50,100,"所有"]],pageLength:20,dom:"<'row'<'col-sm-12'<'selected-sum'>>><'row'<'col-sm-4'l><'col-sm-4 text-center'i><'col-sm-4'<'search-box'>>><'row'<'col-sm-12'tr>><'row'<'col-sm-12'p>>",select:{style:"multi",selector:"td.select-checkbox"},autoWidth:!1,order:[[28,"desc"]]}),$("#pane-cal-results div.search-box").html('<label>查找:<input type="search" class="form-control input-sm" placeholder="厨师 菜名 材料"></label>'),a.data.message?$("#pane-cal-results .selected-sum").html(a.data.message):$("#pane-cal-results .selected-sum").html("点击列可选择"),$.fn.dataTableExt.afnFiltering.push(i),$.fn.dataTableExt.afnFiltering.push(c),calResultsTable.on("select deselect",function(e,i,c,l){var a=i.rows({selected:!0}).indexes(),t=i.cells(a,25).data().reduce(function(e,i){return e+i},0),s=i.cells(a,26).data().reduce(function(e,i){return e+i},0),r=i.cells(a,27).data().reduce(function(e,i){return e+i},0),n=i.cells(a,28).data().reduce(function(e,i){return e+i},0);$("#pane-cal-results .selected-sum").html("原售价："+t+" 实售价："+s+" 规则分："+r+" 总得分："+n),$("#chk-cal-results-show-selected").prop("checked")&&calResultsTable.draw()}),$("#pane-cal-results .search-box input").keyup(function(){calResultsTable.draw()}),$("#chk-cal-results-show-selected").prop("checked",!1);var t="",s="";$("#chk-cal-results-show-selected").change(function(){$("#chk-cal-results-show-selected").prop("checked")?(t=$("#pane-cal-results .search-box input").val(),$("#pane-cal-results .search-box input").val(s)):(s=$("#pane-cal-results .search-box input").val(),$("#pane-cal-results .search-box input").val(t)),calResultsTable.draw()}),$(".chk-cal-results-show").off("click").click(function(){initCalResultsShow(calResultsTable)}),$("#chk-cal-results-show-all").off("click").click(function(){$(".chk-cal-results-show:checked").length==$(".chk-cal-results-show").length?$(".chk-cal-results-show").prop("checked",!1):$(".chk-cal-results-show").prop("checked",!0),initCalResultsShow(calResultsTable)}),initCalResultsShow(calResultsTable),"optimal"==l?($(".chk-cal-results-show-selected-wrapper").addClass("hidden"),calResultsTable.rows().select()):"all"==l&&$(".chk-cal-results-show-selected-wrapper").removeClass("hidden"),$(".cal-results-progress").addClass("hidden"),$(".cal-results-wrapper").removeClass("hidden"),$(".btn-cal-results-cal").prop("disabled",!1),$("#btn-cal-results-cal-stop").prop("disabled",!0)},1e3))};var a=calRecipesTable.rows({selected:!0}).data().toArray(),t=$("#chk-cal-recipes-addition").prop("checked"),s=calChefsTable.rows({selected:!0}).data().toArray(),r=$("#chk-cal-chefs-addition").prop("checked"),n=calIngredientsTable.rows({selected:!0}).data().toArray(),o=$("#chk-cal-ingredients-addition").prop("checked"),h=$("#chk-cal-ingredients-addition-cumulative").prop("checked"),d=Math.floor($("#input-cal-results-show-top").val()),p=$("#chk-cal-recipes-mulitple").prop("checked"),f=$("#select-cal-results-chefs-number").val(),u=$("#select-cal-results-recipes-number").val();
calWorker.postMessage({recipes:a,chefs:s,ingredients:n,mode:l,allLimit:d,optimalChefsNum:f,optimalRecipesNum:u,recipesMulitple:p,hasRecipesAddition:t,hasChefsAddition:r,hasIngredientsAddition:o,ingredientsAdditionCumulative:h})}else $(".cal-results-progress").addClass("hidden"),$(".btn-cal-results-cal").prop("disabled",!1),$("#btn-cal-results-cal-stop").prop("disabled",!0)})}function generateData(e,c){var l=new Object;l.history=e.history;var a=new Array;for(i in e.ingredients){var t=new Object;t=e.ingredients[i],t.fireDisp=getFireDisp(e.ingredients[i].fire),t.originVal=getOriginVal(e.ingredients[i].origin),t.addition="",a.push(t)}l.ingredients=a;var s=new Array;for(i in e.kitchenware)if(e.kitchenware[i].name){var r=new Object;r=e.kitchenware[i],r.fireDisp=getFireDisp(e.kitchenware[i].fire);var o=getSkillInfo(e.kitchenware[i].skill);r.skillVal=o.skillVal,r.skillDisp=o.skillDisp,s.push(r)}l.kitchenware=s;var h=new Array;for(i in e.chefs)if(e.chefs[i].name){var d=new Object;d=e.chefs[i],d.recipes=new Array,d.stirfry=e.chefs[i].stirfry||"",d.boil=e.chefs[i].boil||"",d.cut=e.chefs[i].cut||"",d.fry=e.chefs[i].fry||"",d.roast=e.chefs[i].roast||"",d.steam=e.chefs[i].steam||"",d.meat=e.chefs[i].meat||"",d.wheat=e.chefs[i].wheat||"",d.veg=e.chefs[i].veg||"",d.fish=e.chefs[i].fish||"",d.addition="",d.chefIdDisp=e.chefs[i].chefId+" - "+(e.chefs[i].chefId+2),d.fireDisp=getFireDisp(e.chefs[i].fire);var o=getSkillInfo(e.chefs[i].skill);d.specialSkillVal=o.skillVal,d.specialSkillDisp=o.skillDisp,h.push(d)}l.chefs=h;var p=new Array;for(i in e.recipes)if(e.recipes[i].name){var f=new Object;f=e.recipes[i],f.stirfry=e.recipes[i].stirfry||"",f.boil=e.recipes[i].boil||"",f.cut=e.recipes[i].cut||"",f.fry=e.recipes[i].fry||"",f.roast=e.recipes[i].roast||"",f.steam=e.recipes[i].steam||"",f.price=e.recipes[i].price||"",f.total=e.recipes[i].total||"",f.addition="",f.timeDisp=secondsToTime(e.recipes[i].time),f.fireDisp=getFireDisp(e.recipes[i].fire);var u=0,k=0,b=0;e.recipes[i].price>0&&e.recipes[i].time>0&&(b=3600*e.recipes[i].price/e.recipes[i].time,e.recipes[i].total>0&&(u=e.recipes[i].price*e.recipes[i].total,k=e.recipes[i].time*e.recipes[i].total)),f.totalPrice=u?u:"",f.totalTime=k,f.totalTimeDisp=secondsToTime(k),f.efficiency=b?Math.floor(b):"";var w=getIngredientsInfo(e.recipes[i]);f.ingredientsVal=w.ingredientsVal,f.ingredientsDisp=w.ingredientsDisp;var $=0;e.recipes[i].time>0&&($=3600*w.ingredientsCount/e.recipes[i].time),f.ingredientsEff=$?Math.floor($):"";var v="",y="";for(g in e.recipes[i].guests)if(e.recipes[i].guests[g].guest){if(c&&("优"==e.recipes[i].quality&&"优"==e.recipes[i].guests[g].quality||"特"==e.recipes[i].quality&&"神"!=e.recipes[i].guests[g].quality||"神"==e.recipes[i].quality))continue;v+=e.recipes[i].guests[g].quality+"-"+e.recipes[i].guests[g].guest+"<br>",y+=e.recipes[i].guests[g].guest}f.levelGuestsVal=y,f.levelGuestsDisp=v;var x="";for(m in e.guests)for(n in e.guests[m].gifts)if(e.recipes[i].name==e.guests[m].gifts[n].recipe){x+=e.guests[m].name+"-"+e.guests[m].gifts[n].rune+"<br>";break}f.guestsDisp=x,f.chefs=new Array;for(j in l.chefs){var T=getQualityInfo(e.recipes[i],l.chefs[j]),C=0;if(T.qualityVal>0){var M=getChefSkillAddition(e.recipes[i],l.chefs[j],l.ingredients);b>0&&(C=(1+T.qualityAddition+M+(c?e.furniture:0))*b)}var I=new Object;I.qualityVal=T.qualityVal,I.qualityDisp=T.qualityDisp,I.efficiency=Math.floor(C)||"",f.chefs.push(I);var _=new Object;_.qualityVal=T.qualityVal,_.qualityDisp=T.qualityDisp,l.chefs[j].recipes.push(_)}p.push(f)}return l.recipes=p,l}function generateCalRecipeData(e){var c=new Array;for(i in e.recipes)e.recipes[i].price&&c.push(e.recipes[i]);return c}function getQualityInfo(e,i){var c=Number.MAX_VALUE;e.stirfry>0&&(c=i.stirfry>0?Math.min(c,i.stirfry/e.stirfry):0),c>=1&&e.boil>0&&(c=i.boil>0?Math.min(c,i.boil/e.boil):0),c>=1&&e.cut>0&&(c=i.cut>0?Math.min(c,i.cut/e.cut):0),c>=1&&e.fry>0&&(c=i.fry>0?Math.min(c,i.fry/e.fry):0),c>=1&&e.roast>0&&(c=i.roast>0?Math.min(c,i.roast/e.roast):0),c>=1&&e.steam>0&&(c=i.steam>0?Math.min(c,i.steam/e.steam):0);var l=new Object,a=0,t="-",s=0;return c!=Number.MAX_VALUE&&c>=1&&(c>=4?(a=.5,t="神",s=4):c>=3?(a=.3,t="特",s=3):c>=2?(a=.1,t="优",s=2):c>=1&&(a=0,t="可",s=1)),l.qualityAddition=a,l.qualityDisp=t,l.qualityVal=s,l}function getIngredientsInfo(e){var i=new Object,c="",l="",a=0;for(var t in e.ingredients)e.ingredients[t].name&&(c+=e.ingredients[t].name+"*"+e.ingredients[t].quantity+" ",l+=e.ingredients[t].name,a+=e.ingredients[t].quantity);return i.ingredientsDisp=c,i.ingredientsVal=l,i.ingredientsCount=a,i}function getSkillInfo(e){var i=new Object,c="",l="";for(j in e)c+=e[j].type+" ",c+=e[j].type.indexOf("稀有客人")>=0||e[j].type.indexOf("料理")>=0||e[j].type.indexOf("金币获得")>=0||e[j].type.indexOf("素材获得")>=0?"+"+100*e[j].addition+"%<br>":e[j].type.indexOf("技法")>=0||e[j].type.indexOf("采集")>=0?"+"+e[j].addition+"<br>":e[j].addition+"<br>",l+=e[j].type;return i.skillDisp=c,i.skillVal=l,i}function getChefSkillAddition(e,i,c){var l=0;if(i.hasOwnProperty("skill"))for(var a in i.skill){var t=!1;if(i.skill[a].type.indexOf("水产料理")>=0){for(var s in e.ingredients)for(var r in c)if(e.ingredients[s].name==c[r].name&&"鱼塘"==c[r].origin){t=!0;break}}else if(i.skill[a].type.indexOf("面类料理")>=0){for(var s in e.ingredients)for(var r in c)if(e.ingredients[s].name==c[r].name&&"作坊"==c[r].origin){t=!0;break}}else if(i.skill[a].type.indexOf("肉类料理")>=0){for(var s in e.ingredients)for(var r in c)if(e.ingredients[s].name==c[r].name&&("牧场"==c[r].origin||"鸡舍"==c[r].origin||"猪圈"==c[r].origin)){t=!0;break}}else if(i.skill[a].type.indexOf("蔬菜料理")>=0){for(var s in e.ingredients)for(var r in c)if(e.ingredients[s].name==c[r].name&&("菜棚"==c[r].origin||"菜地"==c[r].origin||"森林"==c[r].origin)){t=!0;break}}else i.skill[a].type.indexOf("炒类料理")>=0?e.stirfry>0&&(t=!0):i.skill[a].type.indexOf("煮类料理")>=0?e.boil>0&&(t=!0):i.skill[a].type.indexOf("炸类料理")>=0?e.fry>0&&(t=!0):i.skill[a].type.indexOf("切类料理")>=0?e.cut>0&&(t=!0):i.skill[a].type.indexOf("烤类料理")>=0?e.roast>0&&(t=!0):i.skill[a].type.indexOf("蒸类料理")>=0?e.steam>0&&(t=!0):i.skill[a].type.indexOf("金币获得")>=0&&(t=!0);t&&(l+=i.skill[a].addition)}return l}function getFireDisp(e){for(var i="",c=0;c<e;c++)i+="&#x2605;";return i}function getOriginVal(e){var i=0;return"菜棚"==e?i=1:"菜地"==e?i=2:"森林"==e?i=3:"鸡舍"==e?i=4:"猪圈"==e?i=5:"牧场"==e?i=6:"作坊"==e?i=7:"鱼塘"==e&&(i=8),i}function initRecipeShow(e,i,c){e.column(0).visible($("#chk-recipe-show-id").prop("checked"),!1),e.column(2).visible($("#chk-recipe-show-fire").prop("checked"),!1);var l=$("#chk-recipe-show-skill").prop("checked");e.column(3).visible(l,!1),e.column(4).visible(l,!1),e.column(5).visible(l,!1),e.column(6).visible(l,!1),e.column(7).visible(l,!1),e.column(8).visible(l,!1),e.column(9).visible($("#chk-recipe-show-ingredients").prop("checked"),!1),e.column(10).visible($("#chk-recipe-show-price").prop("checked"),!1),e.column(11).visible($("#chk-recipe-show-time").prop("checked"),!1),e.column(12).visible($("#chk-recipe-show-total").prop("checked"),!1),e.column(13).visible($("#chk-recipe-show-total-price").prop("checked"),!1),e.column(14).visible($("#chk-recipe-show-total-time").prop("checked"),!1),e.column(15).visible($("#chk-recipe-show-efficiency").prop("checked"),!1),e.column(16).visible($("#chk-recipe-show-ingredients-efficiency").prop("checked"),!1),e.column(17).visible($("#chk-recipe-show-origin").prop("checked"),!1),e.column(18).visible($("#chk-recipe-show-unlock").prop("checked"),!1),e.column(19).visible($("#chk-recipe-show-guest").prop("checked"),!1),e.column(20).visible($("#chk-recipe-show-level-guest").prop("checked"),!1),e.column(21).visible($("#chk-recipe-show-god-rune").prop("checked"),!1),c?e.column(22).visible($("#chk-recipe-show-quality").prop("checked"),!1):e.column(22).visible(!1,!1);var a=$("#chk-recipe-show-chef").val();for(j=0;j<i.chefs.length;j++)e.column(23+2*j).visible(a.indexOf(j.toString())>-1,!1),e.column(24+2*j).visible(a.indexOf(j.toString())>-1,!1);e.columns.adjust().draw(!1)}function initChefShow(e,i){e.column(0).visible($("#chk-chef-show-id").prop("checked"),!1),e.column(2).visible($("#chk-chef-show-fire").prop("checked"),!1);var c=$("#chk-chef-show-skill").prop("checked");e.column(3).visible(c,!1),e.column(4).visible(c,!1),e.column(5).visible(c,!1),e.column(6).visible(c,!1),e.column(7).visible(c,!1),e.column(8).visible(c,!1),e.column(9).visible($("#chk-chef-show-special-skill").prop("checked"),!1);var l=$("#chk-chef-show-harvest").prop("checked");e.column(10).visible(l,!1),e.column(11).visible(l,!1),e.column(12).visible(l,!1),e.column(13).visible(l,!1),e.column(14).visible($("#chk-chef-show-sex").prop("checked"),!1),e.column(15).visible($("#chk-chef-show-origin").prop("checked"),!1);var a=$("#chk-chef-show-recipe").val();for(j=0;j<i.recipes.length;j++)e.column(16+j).visible(a.indexOf(j.toString())>-1,!1);e.columns.adjust().draw(!1)}function initKitchenwareShow(e){e.column(0).visible($("#chk-kitchenware-show-id").prop("checked"),!1),e.column(2).visible($("#chk-kitchenware-show-fire").prop("checked"),!1),e.column(3).visible($("#chk-kitchenware-show-special-skill").prop("checked"),!1),e.column(4).visible($("#chk-kitchenware-show-origin").prop("checked"),!1),e.columns.adjust().draw(!1)}function initCalRecipesShow(e){e.column(1).visible($("#chk-cal-recipes-show-id").prop("checked"),!1),e.column(3).visible($("#chk-cal-recipes-show-fire").prop("checked"),!1);var i=$("#chk-cal-recipes-show-skill").prop("checked");e.column(4).visible(i,!1),e.column(5).visible(i,!1),e.column(6).visible(i,!1),e.column(7).visible(i,!1),e.column(8).visible(i,!1),e.column(9).visible(i,!1),e.column(10).visible($("#chk-cal-recipes-show-ingredient").prop("checked"),!1),e.column(11).visible($("#chk-cal-recipes-show-price").prop("checked"),!1),e.column(12).visible($("#chk-cal-recipes-show-total").prop("checked"),!1),e.column(13).visible($("#chk-cal-recipes-show-total-price").prop("checked"),!1),e.column(14).visible($("#chk-cal-recipes-show-origin").prop("checked"),!1),e.column(15).visible($("#chk-cal-recipes-addition").prop("checked"),!1),e.columns.adjust().draw(!1)}function initCalChefsShow(e){e.column(1).visible($("#chk-cal-chefs-show-id").prop("checked"),!1),e.column(3).visible($("#chk-cal-chefs-show-fire").prop("checked"),!1);var i=$("#chk-cal-chefs-show-skill").prop("checked");e.column(4).visible(i,!1),e.column(5).visible(i,!1),e.column(6).visible(i,!1),e.column(7).visible(i,!1),e.column(8).visible(i,!1),e.column(9).visible(i,!1),e.column(10).visible($("#chk-cal-chefs-show-special-skill").prop("checked"),!1),e.column(11).visible($("#chk-cal-chefs-show-sex").prop("checked"),!1),e.column(12).visible($("#chk-cal-chefs-show-origin").prop("checked"),!1),e.column(13).visible($("#chk-cal-chefs-addition").prop("checked"),!1),e.columns.adjust().draw(!1)}function initCalIngredientsShow(e){e.column(1).visible($("#chk-cal-ingredients-show-id").prop("checked"),!1),e.column(3).visible($("#chk-cal-ingredients-show-fire").prop("checked"),!1),e.column(4).visible($("#chk-cal-ingredients-show-origin").prop("checked"),!1),e.column(5).visible($("#chk-cal-ingredients-addition").prop("checked"),!1),e.columns.adjust().draw(!1)}function initCalResultsShow(e){e.column(2).visible($("#chk-cal-results-show-chef-fire").prop("checked"),!1),e.column(3).visible($("#chk-cal-results-show-chef-sex").prop("checked"),!1);var i=$("#chk-cal-results-show-chef-skill").prop("checked");e.column(4).visible(i,!1),e.column(5).visible(i,!1),e.column(6).visible(i,!1),e.column(7).visible(i,!1),e.column(8).visible(i,!1),e.column(9).visible(i,!1),e.column(11).visible($("#chk-cal-results-show-recipe-fire").prop("checked"),!1);var c=$("#chk-cal-results-show-recipe-skill").prop("checked");e.column(12).visible(c,!1),e.column(13).visible(c,!1),e.column(14).visible(c,!1),e.column(15).visible(c,!1),e.column(16).visible(c,!1),e.column(17).visible(c,!1),e.column(18).visible($("#chk-cal-results-show-recipe-ingredient").prop("checked"),!1),e.column(21).visible($("#chk-cal-results-show-recipe-quality").prop("checked"),!1),e.column(25).visible($("#chk-cal-results-show-recipe-total-price").prop("checked"),!1),e.column(26).visible($("#chk-cal-results-show-recipe-real-total-price").prop("checked"),!1),e.column(27).visible($("#chk-cal-results-show-recipe-bonus-score").prop("checked"),!1),e.columns.adjust().draw(!1)}function initInfo(e){$("#pagination-history").pagination({dataSource:e.history,callback:function(e,i){var c=historyTemplate(e);$("#data-history").html(c)},pageSize:10,showPageNumbers:!1,showNavigator:!1,showPrevious:!1,showNext:!1})}function historyTemplate(e){var i="";return $.each(e,function(e,c){i+="<p>"+c+"</p>"}),i}function secondsToTime(e){e=Number(e);var i=Math.floor(e/3600/24),c=Math.floor(e/3600%24),l=Math.floor(e/60%60),a=Math.floor(e%60),t="";return i>0&&(t+=i+"天"),c>0&&(t+=c+"小时"),l>0&&(t+=l+"分"),a>0&&(t+=a+"秒"),t}function getInputHtml(e,i,c){var l,a,t,s,r,n;switch(t={focus:!0,html:null},i.inputTypes&&$.each(i.inputTypes,function(i,c){c.column==e&&(l=c,a=l.type.toLowerCase())}),i.inputCss&&(s=i.inputCss),i.confirmationButton&&(r=i.confirmationButton.confirmCss,n=i.confirmationButton.cancelCss,a+="-confirm"),a){case"list":t.html="<select class='"+s+"' onchange='$(this).updateEditableCell(this);'>",$.each(l.options,function(e,i){c==i.value?t.html=t.html+"<option value='"+i.value+"' selected>"+i.display+"</option>":t.html=t.html+"<option value='"+i.value+"' >"+i.display+"</option>"}),t.html=t.html+"</select>",t.focus=!1;break;default:t.html="<input id='ejbeatycelledit' class='form-control "+s+"' onfocusout='$(this).updateEditableCell(this)' value='"+c+"'></input>"}return t}function sanitizeCellValue(e){return"undefined"==typeof e||null===e||e.length<1?"":(isNaN(e)&&(e=e.replace(/'/g,"&#39;")),e)}var calWorker,calRecipesTable,calChefsTable,calIngredientsTable,calResultsTable;$.fn.dataTable.Api.register("MakeCellsEditable()",function(e){var i=this.table();jQuery.fn.extend({updateEditableCell:function(i){function c(){e.allowNulls.errorClass?$(r).addClass(e.allowNulls.errorClass):$(r).css({border:"red solid 1px"})}function l(e){t.data();t.data(e)}var a=$(i).closest("table").DataTable().table(),t=(a.row($(i).parents("tr")),a.cell($(i).parent())),s=t.index().column,r=$(i),n=r.val();!n&&e.allowNulls&&1!=e.allowNulls?e.allowNulls.columns?e.allowNulls.columns.indexOf(s)>-1?l(n):c():n||c():l(n)},cancelEditableCell:function(e){var i=$(e.closest("table")).DataTable().table(),c=i.cell($(e).parent());c.data(c.data()),i.draw()}}),"destroy"===e&&($(i.body()).off("click","td"),i=null),null!=i&&$(i.body()).on("click","td",function(){var c=i.cell(this).index().column;if(e.columns&&e.columns.indexOf(c)>-1||!e.columns){var l=i.row($(this).parents("tr"));editableCellsRow=l;var a=i.cell(this).node(),t=i.cell(this).data();if(t=sanitizeCellValue(t),!$(a).find("input").length&&!$(a).find("select").length&&!$(a).find("textarea").length){var s=getInputHtml(c,e,t);$(a).html(s.html),s.focus&&$("#ejbeatycelledit").select().focus()}}})});