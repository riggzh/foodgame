function getRankInfo(i,t,e){setDataForChef2(t,e);var a=Number.MAX_VALUE;i.stirfry>0&&(a=Math.min(a,t.stirfryVal/i.stirfry)),i.boil>0&&(a=Math.min(a,t.boilVal/i.boil)),i.knife>0&&(a=Math.min(a,t.knifeVal/i.knife)),i.fry>0&&(a=Math.min(a,t.fryVal/i.fry)),i.bake>0&&(a=Math.min(a,t.bakeVal/i.bake)),i.steam>0&&(a=Math.min(a,t.steamVal/i.steam));var r=new Object,n=0,l="-",o=0;return a!=Number.MAX_VALUE&&(a>=4?(n=.5,l="神",o=4):a>=3?(n=.3,l="特",o=3):a>=2?(n=.1,l="优",o=2):a>=1&&(n=0,l="可",o=1)),r.rankAddition=n,r.rankDisp=l,r.rankVal=o,r}function getSkillAddition(i,t){var e=0;for(var a in t){var r=!1;if(t[a].type.indexOf("水产料理售价")>=0){for(var n in i.materials)if("鱼塘"==i.materials[n].origin){r=!0;break}}else if(t[a].type.indexOf("面类料理售价")>=0){for(var n in i.materials)if("作坊"==i.materials[n].origin){r=!0;break}}else if(t[a].type.indexOf("肉类料理售价")>=0){for(var n in i.materials)if("牧场"==i.materials[n].origin||"鸡舍"==i.materials[n].origin||"猪圈"==i.materials[n].origin){r=!0;break}}else if(t[a].type.indexOf("蔬菜料理售价")>=0){for(var n in i.materials)if("菜棚"==i.materials[n].origin||"菜地"==i.materials[n].origin||"森林"==i.materials[n].origin){r=!0;break}}else t[a].type.indexOf("炒类料理售价")>=0?i.stirfry>0&&(r=!0):t[a].type.indexOf("煮类料理售价")>=0?i.boil>0&&(r=!0):t[a].type.indexOf("炸类料理售价")>=0?i.fry>0&&(r=!0):t[a].type.indexOf("切类料理售价")>=0?i.knife>0&&(r=!0):t[a].type.indexOf("烤类料理售价")>=0?i.bake>0&&(r=!0):t[a].type.indexOf("蒸类料理售价")>=0?i.steam>0&&(r=!0):t[a].type.indexOf("金币获得")>=0?r=!0:t[a].type.indexOf("营业收入")>=0&&(r=!0);r&&(e=e.add(t[a].addition))}return e}function getMaterialsAddition(i,t){var e=0;for(var a in i.materials)for(var r in t)if(i.materials[a].material==t[r].materialId&&t[r].addition){e=e.add(Number(t[r].addition));break}return e}function getAdditionDisp(i){return i?i.mul(100)+"%":""}function getRecipeQuantity(i,t,e){var a=1;0==e.DisableMultiCookbook&&(a=i.limitVal);for(var r in i.materials){var n=!1;for(var l in t)if(i.materials[r].material==t[l].materialId){if(n=!0,t[l].quantity){var o=Math.floor(t[l].quantity/i.materials[r].quantity);o<a&&(a=o);break}if(0===t[l].quantity)return 0}if(!n)return 0}return a<0?0:a}function getRecipeResult(i,t,e,a,r,n,l,o){var s=new Object,f=0,d=0,p=0,c=0,m=0,u=0;if(s.disp=e.name,i){var b=getRankInfo(e,i,t);if(s.rankVal=b.rankVal,s.rankDisp=b.rankDisp,0==b.rankVal)return s;l&&0!=l.DisableCookbookRank||(f=b.rankAddition),s.rankAddition=f,s.rankAdditionDisp=getAdditionDisp(f),l&&0!=l.DisableChefSkillEffect||(d=getSkillAddition(e,i.specialSkillEffect),u=u.add(getTimeAddition(i.specialSkillEffect))),s.chefSkillAddition=d,s.chefSkillAdditionDisp=getAdditionDisp(d),l&&0!=l.DisableEquipSkillEffect||t&&(p=getSkillAddition(e,t.effect),u=u.add(getTimeAddition(t.effect))),s.equipSkillAddition=p,s.equipSkillAdditionDisp=getAdditionDisp(p),m=m.add(Number(i.addition))}if(l&&0!=l.DisableDecorationEffect||o&&(c=o),s.decorationAddition=c,s.decorationAdditionDisp=getAdditionDisp(c),m=m.add(Number(e.addition)),l&&l.hasOwnProperty("MaterialsEffect")){var k=getMaterialsAddition(e,n);m=m.add(k)}var g=Number(1).add(f).add(d).add(p).add(c).add(e.ultimateAddition),y=g.add(m);s.data=e,s.quantity=a,s.max=r,s.limit=a,s.otherAddition=m,s.otherAdditionDisp=getAdditionDisp(m),s.totalPrice=e.price*a,s.realPrice=Math.ceil(e.price.mul(g)),s.totalRealPrice=s.realPrice*a;var D=Math.ceil(e.price.mul(y));s.bonusScore=D-s.realPrice,s.totalBonusScore=s.bonusScore*a,s.totalScore=D*a,s.totalTime=Math.ceil(e.time.mul(Number(1).add(u)))*a,s.totalTimeDisp=secondsToTime(s.totalTime);var h=0;return i&&s.rankVal>0&&(h=Math.floor(3600*s.realPrice/(e.time*(1+u)))),s.chefEff=h,s}function getTimeAddition(i){var t=0;for(var e in i)i[e].type.indexOf("开业时间")>=0&&(t+=i[e].addition);return t}function secondsToTime(i){i=Number(i);var t=Math.floor(i/3600/24),e=Math.floor(i/3600%24),a=Math.floor(i/60%60),r=Math.floor(i%60),n="";return t>0&&(n+=t+"天"),e>0&&(n+=e+"小时"),a>0&&(n+=a+"分"),r>0&&(n+=r+"秒"),n}function getEquipInfo(i,t){var e=new Object;if(i)for(var a in t)if(i==t[a].name){e.name=t[a].name,e.effect=t[a].effect,e.disp=t[a].name+"<br><small>"+t[a].skillDisp+"</small>";break}return e}function setDataForChef2(i,t){i.stirfryVal=i.stirfry,i.boilVal=i.boil,i.knifeVal=i.knife,i.fryVal=i.fry,i.bakeVal=i.bake,i.steamVal=i.steam,i.stirfryDisp=i.stirfry||"",i.boilDisp=i.boil||"",i.knifeDisp=i.knife||"",i.fryDisp=i.fry||"",i.bakeDisp=i.bake||"",i.steamDisp=i.steam||"";var e=i.stirfryUltimateAddition,a=i.boilUltimateAddition,r=i.knifeUltimateAddition,n=i.fryUltimateAddition,l=i.bakeUltimateAddition,o=i.steamUltimateAddition;if(t){var s=t.effect;for(var f in s){var d=s[f].type,p=s[f].addition;(d.indexOf("炒技法")>=0||d.indexOf("全技法")>=0)&&(e+=isInt(p)?p:i.stirfry*p),(d.indexOf("煮技法")>=0||d.indexOf("全技法")>=0)&&(a+=isInt(p)?p:i.boil*p),(d.indexOf("切技法")>=0||d.indexOf("全技法")>=0)&&(r+=isInt(p)?p:i.knife*p),(d.indexOf("炸技法")>=0||d.indexOf("全技法")>=0)&&(n+=isInt(p)?p:i.fry*p),(d.indexOf("烤技法")>=0||d.indexOf("全技法")>=0)&&(l+=isInt(p)?p:i.bake*p),(d.indexOf("蒸技法")>=0||d.indexOf("全技法")>=0)&&(o+=isInt(p)?p:i.steam*p)}}e&&(e=Math.ceil(e),i.stirfryVal+=e,e>0?i.stirfryDisp+="+":i.stirfryDisp+="",i.stirfryDisp+=e),a&&(a=Math.ceil(a),i.boilVal+=a,a>0?i.boilDisp+="+":i.boilDisp+="",i.boilDisp+=a),r&&(r=Math.ceil(r),i.knifeVal+=r,r>0?i.knifeDisp+="+":i.knifeDisp+="",i.knifeDisp+=r),n&&(n=Math.ceil(n),i.fryVal+=n,n>0?i.fryDisp+="+":i.fryDisp+="",i.fryDisp+=n),l&&(l=Math.ceil(l),i.bakeVal+=l,l>0?i.bakeDisp+="+":i.bakeDisp+="",i.bakeDisp+=l),o&&(o=Math.ceil(o),i.steamVal+=o,o>0?i.steamDisp+="+":i.steamDisp+="",i.steamDisp+=o),i.disp=i.name+"<br><small>";var c=0;i.stirfryDisp&&(i.disp+="炒"+i.stirfryDisp+" ",c++),i.boilDisp&&(i.disp+="煮"+i.boilDisp+" ",c++,c%2==0&&(i.disp+="<br>")),i.knifeDisp&&(i.disp+="切"+i.knifeDisp+" ",c++,c%2==0&&(i.disp+="<br>")),i.fryDisp&&(i.disp+="炸"+i.fryDisp+" ",c++,c%2==0&&(i.disp+="<br>")),i.bakeDisp&&(i.disp+="烤"+i.bakeDisp+" ",c++,c%2==0&&(i.disp+="<br>")),i.steamDisp&&(i.disp+="蒸"+i.steamDisp+" "),i.disp+="</small>"}function isInt(i){return i%1===0}function isNumeric(i){return!isNaN(parseFloat(i))&&isFinite(i)}function accAdd(i,t){isNaN(i)&&(i=0),isNaN(t)&&(t=0),i=Number(i),t=Number(t);var e,a,r,n;try{e=i.toString().split(".")[1].length}catch(i){e=0}try{a=t.toString().split(".")[1].length}catch(i){a=0}if(n=Math.abs(e-a),r=Math.pow(10,Math.max(e,a)),n>0){var l=Math.pow(10,n);e>a?(i=Number(i.toString().replace(".","")),t=Number(t.toString().replace(".",""))*l):(i=Number(i.toString().replace(".",""))*l,t=Number(t.toString().replace(".","")))}else i=Number(i.toString().replace(".","")),t=Number(t.toString().replace(".",""));return(i+t)/r}function accSub(i,t){isNaN(i)&&(i=0),isNaN(t)&&(t=0),i=Number(i),t=Number(t);var e,a,r,n;try{e=i.toString().split(".")[1].length}catch(i){e=0}try{a=t.toString().split(".")[1].length}catch(i){a=0}return r=Math.pow(10,Math.max(e,a)),n=e>=a?e:a,((i*r-t*r)/r).toFixed(n)}function accMul(i,t){isNaN(i)&&(i=0),isNaN(t)&&(t=0),i=Number(i),t=Number(t);var e=0,a=i.toString(),r=t.toString();try{e+=a.split(".")[1].length}catch(i){}try{e+=r.split(".")[1].length}catch(i){}return Number(a.replace(".",""))*Number(r.replace(".",""))/Math.pow(10,e)}function accDiv(arg1,arg2){isNaN(arg1)&&(arg1=0),isNaN(arg2)&&(arg2=0),arg1=Number(arg1),arg2=Number(arg2);var t1=0,t2=0,r1,r2;try{t1=arg1.toString().split(".")[1].length}catch(i){}try{t2=arg2.toString().split(".")[1].length}catch(i){}with(Math)return r1=Number(arg1.toString().replace(".","")),r2=Number(arg2.toString().replace(".","")),r1/r2*pow(10,t2-t1)}Number.prototype.add=function(i){return accAdd(this,i)},Number.prototype.sub=function(i){return accSub(this,i)},Number.prototype.mul=function(i){return accMul(this,i)},Number.prototype.div=function(i){return accDiv(this,i)};