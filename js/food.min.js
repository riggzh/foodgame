function init(e){var i=!1,c=!1;window.location.search&&("0d9753e2fe5a15db2668f70016e565ca7d717c67278ea6c689881ac4"==lcode(window.location.search)&&(i=!0),"12efa26026978758fbbbd57a70747902dba7f1a434d8dbb8cde98373"==lcode(window.location.search)&&(c=!0));var a=generateData(e,i);initRecipeTable(a,i),initChefTable(a),(i||c)&&(initCalTables(e,a),$(".nav-tabs li").removeClass("hidden")),initInfo(a),$(".loading").addClass("hidden"),$(".main-function").removeClass("hidden")}function initRecipeTable(e,i){var c=[{data:"recipeId"},{data:"name"},{data:{_:"fire",display:"fireDisp"}},{data:"stirfry"},{data:"boil"},{data:"cut"},{data:"fry"},{data:"roast"},{data:"steam"},{data:{_:"ingredientsVal",display:"ingredientsDisp"}},{data:"price"},{data:{_:"time",display:"timeDisp"}},{data:"total"},{data:"totalPrice"},{data:{_:"totalTime",display:"totalTimeDisp"}},{data:"efficiency"},{data:"ingredientsEff"},{data:"origin"},{data:"unlock"},{data:"guestsDisp"},{data:{_:"levelGuestsVal",display:"levelGuestsDisp"}},{data:"godRune"},{data:"quality"}];for(j in e.chefs)$("#chk-recipe-show-chef").append("<option value='"+j+"'>"+e.chefs[j].name+"</option>"),$("#recipe-table thead tr").append("<th>"+e.chefs[j].name+"</th>").append("<th>效率</th>"),c.push({data:{_:"chefs."+j+".qualityVal",display:"chefs."+j+".qualityDisp"}}),c.push({data:"chefs."+j+".efficiency"});var a=$("#recipe-table").DataTable({data:e.recipes,columns:c,language:{search:"查找:",lengthMenu:"一页显示 _MENU_ 个",zeroRecords:"没有找到",info:"第 _PAGE_ 页 共 _PAGES_ 页 _TOTAL_ 个菜谱",infoEmpty:"没有数据",infoFiltered:"(从 _MAX_ 个菜谱中过滤)"},pagingType:"numbers",lengthMenu:[[10,20,50,100,-1],[10,20,50,100,"所有"]],pageLength:20,dom:"<'row'<'col-sm-4'l><'col-sm-4 text-center'i><'col-sm-4'<'search-box'>>><'row'<'col-sm-12'tr>><'row'<'col-sm-12'p>>"});$("#pane-recipes div.search-box").html('<label>查找:<input type="search" class="form-control input-sm" placeholder="菜名 材料 贵客 符文"></label>'),$.fn.dataTableExt.afnFiltering.push(function(e,i,c){if(e.nTable!=document.getElementById("recipe-table"))return!0;var a=$("#chk-recipe-fire-0").prop("checked"),t=$("#chk-recipe-fire-1").prop("checked"),l=$("#chk-recipe-fire-2").prop("checked"),s=$("#chk-recipe-fire-3").prop("checked"),r=$("#chk-recipe-fire-4").prop("checked"),n=$("#chk-recipe-fire-5").prop("checked"),o=Math.floor(i[2])||0;return!!(a&&0==o||t&&1==o||l&&2==o||s&&3==o||r&&4==o||n&&5==o)}),$.fn.dataTableExt.afnFiltering.push(function(e,i,c){return e.nTable!=document.getElementById("recipe-table")||!!($("#chk-recipe-skill-stirfry").prop("checked")&&(Math.floor(i[3])||0)>0||$("#chk-recipe-skill-boil").prop("checked")&&(Math.floor(i[4])||0)>0||$("#chk-recipe-skill-cut").prop("checked")&&(Math.floor(i[5])||0)>0||$("#chk-recipe-skill-fry").prop("checked")&&(Math.floor(i[6])||0)>0||$("#chk-recipe-skill-roast").prop("checked")&&(Math.floor(i[7])||0)>0||$("#chk-recipe-skill-steam").prop("checked")&&(Math.floor(i[8])||0)>0||$("#chk-recipe-skill-unknown").prop("checked")&&0==(Math.floor(i[3])||0)&&0==(Math.floor(i[4])||0)&&0==(Math.floor(i[5])||0)&&0==(Math.floor(i[6])||0)&&0==(Math.floor(i[7])||0)&&0==(Math.floor(i[8])||0))}),$.fn.dataTableExt.afnFiltering.push(function(e,i,c){if(e.nTable!=document.getElementById("recipe-table"))return!0;var a=Math.floor($("#input-recipe-price").val()),t=Math.floor(i[10])||0;return""==$("#input-recipe-price").val()||a<t}),$.fn.dataTableExt.afnFiltering.push(function(e,i,c){if(e.nTable!=document.getElementById("recipe-table"))return!0;var a=$("#chk-recipe-guest").prop("checked"),t=i[19];return!!(!a||a&&t)}),$.fn.dataTableExt.afnFiltering.push(function(e,i,c){if(e.nTable!=document.getElementById("recipe-table"))return!0;for(var a=$("#input-recipe-guest-rune").val(),t=[20,21],l=0,s=t.length;l<s;l++)if(i[t[l]].indexOf(a)!==-1)return!0;return!1}),$.fn.dataTableExt.afnFiltering.push(function(e,i,c){if(e.nTable!=document.getElementById("recipe-table"))return!0;for(var a=$("#pane-recipes .search-box input").val(),t=[0,1,9,19],l=0,s=t.length;l<s;l++)if(i[t[l]].indexOf(a)!==-1)return!0;return!1}),$("#chk-recipe-show-chef").multiselect({templates:{filter:'<li class="multiselect-item filter"><div class="input-group"><span class="input-group-addon"><i class="glyphicon glyphicon-search"></i></span><input class="form-control multiselect-search" type="text"></div><a class="deselect-all">清空</a></li>'},enableFiltering:!0,filterPlaceholder:"查找",numberDisplayed:1,allSelectedText:"厨师",nonSelectedText:"厨师",nSelectedText:"厨师",maxHeight:200,onChange:function(c,t,l){initRecipeShow(a,e,i)}}),$(".chk-recipe-show-chef-wrapper .deselect-all").click(function(){$("#chk-recipe-show-chef").multiselect("deselectAll",!1),$("#chk-recipe-show-chef").multiselect("updateButtonText"),initRecipeShow(a,e,i)}),$(".chk-recipe-show").click(function(){initRecipeShow(a,e,i)}),$("#chk-recipe-show-all").click(function(){$(".btn:not(.hidden) .chk-recipe-show:checked").length==$(".btn:not(.hidden) .chk-recipe-show").length?$(".btn:not(.hidden) .chk-recipe-show").prop("checked",!1):$(".btn:not(.hidden) .chk-recipe-show").prop("checked",!0),initRecipeShow(a,e,i)}),$('.chk-recipe-fire input[type="checkbox"]').click(function(){a.draw()}),$(".chk-recipe-skill").click(function(){$(this).prop("checked")&&$("#chk-recipe-single-skill").prop("checked")&&$(".chk-recipe-skill").not(this).prop("checked",!1),a.draw()}),$("#chk-recipe-single-skill").change(function(){$(this).prop("checked")&&$(".chk-recipe-skill:checked").length>1&&($(".chk-recipe-skill").prop("checked",!1),a.draw())}),$("#chk-recipe-skill-all").click(function(){$("#chk-recipe-single-skill").prop("checked")&&$("#chk-recipe-single-skill").bootstrapToggle("off"),$(".chk-recipe-skill").prop("checked",!0),a.draw()}),$("#input-recipe-price").keyup(function(){a.draw()}),$("#input-recipe-guest-rune").keyup(function(){$("#chk-recipe-show-level-guest").prop("checked")||($("#chk-recipe-show-level-guest").prop("checked",!0),initRecipeShow(a,e,i)),a.draw()}),$("#chk-recipe-guest").click(function(){a.draw()}),$("#pane-recipes .search-box input").keyup(function(){a.draw()}),i&&($("#chk-recipe-show-origin").prop("checked",!1),$("#chk-recipe-show-quality").prop("checked",!0).parent(".btn").removeClass("hidden")),initRecipeShow(a,e,i)}function initChefTable(e){var i=[{data:{_:"chefId",display:"chefIdDisp"}},{data:"name"},{data:{_:"fire",display:"fireDisp"}},{data:"stirfry"},{data:"boil"},{data:"cut"},{data:"fry"},{data:"roast"},{data:"steam"},{data:{_:"specialSkillVal",display:"specialSkillDisp"}},{data:"meat"},{data:"wheat"},{data:"veg"},{data:"fish"},{data:"sex"},{data:"origin"}];for(j in e.recipes)$("#chk-chef-show-recipe").append("<option value='"+j+"'>"+e.recipes[j].name+"</option>"),$("#chef-table thead tr").append("<th>"+e.recipes[j].name+"</th>"),i.push({data:{_:"recipes."+j+".qualityVal",display:"recipes."+j+".qualityDisp"}});var c=$("#chef-table").DataTable({data:e.chefs,columns:i,language:{search:"查找:",lengthMenu:"一页显示 _MENU_ 个",zeroRecords:"没有找到",info:"第 _PAGE_ 页 共 _PAGES_ 页 _TOTAL_ 个厨师",infoEmpty:"没有数据",infoFiltered:"(从 _MAX_ 个厨师中过滤)"},pagingType:"numbers",lengthMenu:[[10,20,50,100,-1],[10,20,50,100,"所有"]],pageLength:20,dom:"<'row'<'col-sm-4'l><'col-sm-4 text-center'i><'col-sm-4'<'search-box'>>><'row'<'col-sm-12'tr>><'row'<'col-sm-12'p>>"});$("#pane-chefs div.search-box").html('<label>查找:<input type="search" class="form-control input-sm" placeholder="名字 技能 来源"></label>'),$.fn.dataTableExt.afnFiltering.push(function(e,i,c){if(e.nTable!=document.getElementById("chef-table"))return!0;var a=$("#chk-chef-fire-1").prop("checked"),t=$("#chk-chef-fire-2").prop("checked"),l=$("#chk-chef-fire-3").prop("checked"),s=$("#chk-chef-fire-4").prop("checked"),r=$("#chk-chef-fire-5").prop("checked"),n=Math.floor(i[2])||0;return!!(a&&1==n||t&&2==n||l&&3==n||s&&4==n||r&&5==n)}),$.fn.dataTableExt.afnFiltering.push(function(e,i,c){if(e.nTable!=document.getElementById("chef-table"))return!0;var a=Math.floor($("#input-chef-stirfry").val()),t=Math.floor(i[3])||0,l=Math.floor($("#input-chef-boil").val()),s=Math.floor(i[4])||0,r=Math.floor($("#input-chef-cut").val()),n=Math.floor(i[5])||0,o=Math.floor($("#input-chef-fry").val()),d=Math.floor(i[6])||0,p=Math.floor($("#input-chef-roast").val()),h=Math.floor(i[7])||0,f=Math.floor($("#input-chef-steam").val()),u=Math.floor(i[8])||0;return a<=t&&l<=s&&r<=n&&o<=d&&p<=h&&f<=u}),$.fn.dataTableExt.afnFiltering.push(function(e,i,c){if(e.nTable!=document.getElementById("chef-table"))return!0;var a=$("#chk-chef-sex-male").prop("checked"),t=$("#chk-chef-sex-female").prop("checked"),l=i[14];return!!(a&&"男"==l||t&&"女"==l)}),$.fn.dataTableExt.afnFiltering.push(function(e,i,c){if(e.nTable!=document.getElementById("chef-table"))return!0;for(var a=$("#pane-chefs .search-box input").val(),t=[1,9,15],l=0,s=t.length;l<s;l++)if(i[t[l]].indexOf(a)!==-1)return!0;return!1}),$("#chk-chef-show-recipe").multiselect({templates:{filter:'<li class="multiselect-item filter"><div class="input-group"><span class="input-group-addon"><i class="glyphicon glyphicon-search"></i></span><input class="form-control multiselect-search" type="text"></div><a class="deselect-all">清空</a></li>'},enableFiltering:!0,filterPlaceholder:"查找",numberDisplayed:1,allSelectedText:"菜谱",nonSelectedText:"菜谱",nSelectedText:"菜谱",maxHeight:200,onChange:function(i,a,t){initChefShow(c,e)}}),$(".chk-chef-show-recipe-wrapper .deselect-all").click(function(){$("#chk-chef-show-recipe").multiselect("deselectAll",!1),$("#chk-chef-show-recipe").multiselect("updateButtonText"),initChefShow(c,e)}),$(".chk-chef-show").click(function(){initChefShow(c,e)}),$("#chk-chef-show-all").click(function(){$(".chk-chef-show:checked").length==$(".chk-chef-show").length?$(".chk-chef-show").prop("checked",!1):$(".chk-chef-show").prop("checked",!0),initChefShow(c,e)}),$('.chk-chef-fire input[type="checkbox"]').click(function(){c.draw()}),$(".input-chef-skill").keyup(function(){c.draw()}),$("#btn-chef-skill-clear").click(function(){$(".input-chef-skill").val(""),c.draw()}),$('.chk-chef-sex input[type="checkbox"]').click(function(){c.draw()}),$("#pane-chefs .search-box input").keyup(function(){c.draw()}),initChefShow(c,e)}function initCalTables(e,i){initCalRecipesTable(i),initCalChefsTable(i),initCalIngredientsTable(i),initCalResultsTable(),$.fn.dataTable.ext.order["dom-selected"]=function(e,i){return this.api().column(i,{order:"index"}).nodes().map(function(e,i){return $(e).parent("tr").hasClass("selected")?"1":"0"})},$.fn.dataTable.ext.order["dom-text-numeric"]=function(e,i){return this.api().column(i,{order:"index"}).nodes().map(function(e,i){return 1*$("input",e).val()})}}function initCalRecipesTable(e){var i=generateCalRecipeData(e),c=[{data:void 0,defaultContent:"",className:"select-checkbox",orderDataType:"dom-selected",width:"30px"},{data:"recipeId"},{data:"name"},{data:{_:"fire",display:"fireDisp"}},{data:"stirfry"},{data:"boil"},{data:"cut"},{data:"fry"},{data:"roast"},{data:"steam"},{data:{_:"ingredientsVal",display:"ingredientsDisp"}},{data:"price"},{data:"total"},{data:"totalPrice"},{data:"origin"},{data:void 0,defaultContent:"",className:"cal-td-input",orderDataType:"dom-text-numeric",width:"38px",createdCell:function(e,i,c,a,t){$(e).html("<input type='text' class='form-control input-addition'>")}}];calRecipesTable=$("#cal-recipes-table").DataTable({data:i,columns:c,language:{search:"查找:",lengthMenu:"一页显示 _MENU_ 个",zeroRecords:"没有找到",info:"共 _MAX_ 个菜谱",infoEmpty:"没有数据",infoFiltered:"",select:{rows:{_:"选择了 %d 个菜谱",0:"选择了 %d 个菜谱",1:"选择了 %d 个菜谱"}}},pagingType:"numbers",lengthMenu:[[10,20,50,100,-1],[10,20,50,100,"所有"]],pageLength:20,dom:"<'row'<'col-sm-4'l><'col-sm-4 text-center'i><'col-sm-4'<'search-box'>>><'row'<'col-sm-12'tr>><'row'<'col-sm-12'p>>",select:{style:"multi",selector:"td:not(.cal-td-input)"},autoWidth:!1,createdRow:function(e,i,c){$(e).addClass("fire-"+i.fire)}}),$("#pane-cal-recipes div.search-box").html('<label>查找:<input type="search" class="form-control input-sm" placeholder="菜名 材料"></label>'),$.fn.dataTableExt.afnFiltering.push(function(e,i,c){if(e.nTable!=document.getElementById("cal-recipes-table"))return!0;for(var a=$("#pane-cal-recipes .search-box input").val(),t=[2,10],l=0,s=t.length;l<s;l++)if(i[t[l]].indexOf(a)!==-1)return!0;return!1}),$(".chk-cal-recipes-show").click(function(){initCalRecipesShow(calRecipesTable)}),$(".chk-cal-recipes-fire").click(function(){$("#chk-cal-recipes-fire-1").prop("checked")?calRecipesTable.rows(".fire-1").select():calRecipesTable.rows(".fire-1").deselect(),$("#chk-cal-recipes-fire-2").prop("checked")?calRecipesTable.rows(".fire-2").select():calRecipesTable.rows(".fire-2").deselect(),$("#chk-cal-recipes-fire-3").prop("checked")?calRecipesTable.rows(".fire-3").select():calRecipesTable.rows(".fire-3").deselect(),$("#chk-cal-recipes-fire-4").prop("checked")?calRecipesTable.rows(".fire-4").select():calRecipesTable.rows(".fire-4").deselect(),$("#chk-cal-recipes-fire-5").prop("checked")?calRecipesTable.rows(".fire-5").select():calRecipesTable.rows(".fire-5").deselect()}),$("#chk-cal-recipes-addition").change(function(){initCalRecipesShow(calRecipesTable),$(this).prop("checked")?$("#chk-cal-recipes-addition-wrapper").removeClass("hidden"):$("#chk-cal-recipes-addition-wrapper").addClass("hidden")}),$("#btn-cal-recipes-addition-clear").click(function(){calRecipesTable.rows().nodes().to$().find(".input-addition").val("")}),$("#btn-cal-recipes-addition-add").click(function(){var e=$("#select-cal-recipes-category").val(),i=Math.floor($("#input-cal-recipes-addition").val());e&&i&&calRecipesTable.rows({selected:!0}).every(function(c,a,t){var l=this.data().categories;for(var s in l)if(l[s]==e){var r=Math.floor($(this.node()).find(".input-addition").val());$(this.node()).find(".input-addition").val(r+i)}})}),$("#pane-cal-recipes .search-box input").keyup(function(){calRecipesTable.draw()}),$("#btn-cal-recipes-select-all").click(function(){calRecipesTable.rows().select()}),$("#btn-cal-recipes-deselect-all").click(function(){calRecipesTable.rows().deselect()}),calRecipesTable.rows().select(),initCalRecipesShow(calRecipesTable)}function initCalChefsTable(e){var i=[{data:void 0,defaultContent:"",className:"select-checkbox",orderDataType:"dom-selected",width:"30px"},{data:{_:"chefId",display:"chefIdDisp"}},{data:"name"},{data:{_:"fire",display:"fireDisp"}},{data:"stirfry"},{data:"boil"},{data:"cut"},{data:"fry"},{data:"roast"},{data:"steam"},{data:{_:"specialSkillVal",display:"specialSkillDisp"}},{data:"sex"},{data:"origin"},{data:void 0,defaultContent:"",className:"cal-td-input",orderDataType:"dom-text-numeric",width:"38px",createdCell:function(e,i,c,a,t){$(e).html("<input type='text' class='form-control input-addition'>")}}];calChefsTable=$("#cal-chefs-table").DataTable({data:e.chefs,columns:i,language:{search:"查找:",lengthMenu:"一页显示 _MENU_ 个",zeroRecords:"没有找到",info:"共 _MAX_ 个厨师",infoEmpty:"没有数据",infoFiltered:"",select:{rows:{_:"选择了 %d 个厨师",0:"选择了 %d 个厨师",1:"选择了 %d 个厨师"}}},pagingType:"numbers",lengthMenu:[[10,20,50,100,-1],[10,20,50,100,"所有"]],pageLength:20,dom:"<'row'<'col-sm-4'l><'col-sm-4 text-center'i><'col-sm-4'<'search-box'>>><'row'<'col-sm-12'tr>><'row'<'col-sm-12'p>>",select:{style:"multi",selector:"td:not(.cal-td-input)"},autoWidth:!1,createdRow:function(e,i,c){$(e).addClass("fire-"+i.fire),$(e).addClass("男"==i.sex?"sex-1":"sex-0")}}),$("#pane-cal-chefs div.search-box").html('<label>查找:<input type="search" class="form-control input-sm" placeholder="名字 性别"></label>'),$.fn.dataTableExt.afnFiltering.push(function(e,i,c){if(e.nTable!=document.getElementById("cal-chefs-table"))return!0;for(var a=$("#pane-cal-chefs .search-box input").val(),t=[2,11],l=0,s=t.length;l<s;l++)if(i[t[l]].indexOf(a)!==-1)return!0;return!1}),$(".chk-cal-chefs-show").click(function(){initCalChefsShow(calChefsTable)}),$('.chk-cal-chefs-fire input[type="checkbox"], .chk-cal-chefs-sex input[type="checkbox"]').click(function(){var e=$("#chk-cal-chefs-fire-1").prop("checked"),i=$("#chk-cal-chefs-fire-2").prop("checked"),c=$("#chk-cal-chefs-fire-3").prop("checked"),a=$("#chk-cal-chefs-fire-4").prop("checked"),t=$("#chk-cal-chefs-fire-5").prop("checked"),l=$("#chk-cal-chefs-sex-male").prop("checked"),s=$("#chk-cal-chefs-sex-female").prop("checked");e&&l?calChefsTable.rows(".sex-1.fire-1").select():calChefsTable.rows(".sex-1.fire-1").deselect(),e&&s?calChefsTable.rows(".sex-0.fire-1").select():calChefsTable.rows(".sex-0.fire-1").deselect(),i&&l?calChefsTable.rows(".sex-1.fire-2").select():calChefsTable.rows(".sex-1.fire-2").deselect(),i&&s?calChefsTable.rows(".sex-0.fire-2").select():calChefsTable.rows(".sex-0.fire-2").deselect(),c&&l?calChefsTable.rows(".sex-1.fire-3").select():calChefsTable.rows(".sex-1.fire-3").deselect(),c&&s?calChefsTable.rows(".sex-0.fire-3").select():calChefsTable.rows(".sex-0.fire-3").deselect(),a&&l?calChefsTable.rows(".sex-1.fire-4").select():calChefsTable.rows(".sex-1.fire-4").deselect(),a&&s?calChefsTable.rows(".sex-0.fire-4").select():calChefsTable.rows(".sex-0.fire-4").deselect(),t&&l?calChefsTable.rows(".sex-1.fire-5").select():calChefsTable.rows(".sex-1.fire-5").deselect(),t&&s?calChefsTable.rows(".sex-0.fire-5").select():calChefsTable.rows(".sex-0.fire-5").deselect()}),$("#chk-cal-chefs-addition").change(function(){initCalChefsShow(calChefsTable),$(this).prop("checked")?$("#chk-cal-chefs-addition-wrapper").removeClass("hidden"):$("#chk-cal-chefs-addition-wrapper").addClass("hidden")}),$("#btn-cal-chefs-addition-clear").click(function(){calChefsTable.rows().nodes().to$().find(".input-addition").val("")}),$("#pane-cal-chefs .search-box input").keyup(function(){calChefsTable.draw()}),$("#btn-cal-chefs-select-all").click(function(){calChefsTable.rows().select()}),$("#btn-cal-chefs-deselect-all").click(function(){calChefsTable.rows().deselect()}),calChefsTable.rows().select(),initCalChefsShow(calChefsTable)}function initCalIngredientsTable(e){var i=[{data:void 0,defaultContent:"",className:"select-checkbox",orderDataType:"dom-selected",width:"30px"},{data:"ingredientId"},{data:"name"},{data:{_:"fire",display:"fireDisp"}},{data:"origin"},{data:void 0,defaultContent:"",className:"cal-td-input",orderDataType:"dom-text-numeric",width:"38px",createdCell:function(e,i,c,a,t){$(e).html("<input type='text' class='form-control input-addition'>")}}];calIngredientsTable=$("#cal-ingredients-table").DataTable({data:e.ingredients,columns:i,language:{search:"查找:",lengthMenu:"一页显示 _MENU_ 个",zeroRecords:"没有找到",info:"共 _MAX_ 个食材",infoEmpty:"没有数据",infoFiltered:"",select:{rows:{_:"选择了 %d 个食材",0:"选择了 %d 个食材",1:"选择了 %d 个食材"}}},pagingType:"numbers",lengthMenu:[[10,20,50,100,-1],[10,20,50,100,"所有"]],pageLength:20,dom:"<'row'<'col-sm-4'l><'col-sm-4 text-center'i><'col-sm-4'<'search-box'>>><'row'<'col-sm-12'tr>><'row'<'col-sm-12'p>>",select:{style:"multi",selector:"td:not(.cal-td-input)"},autoWidth:!1,createdRow:function(e,i,c){$(e).addClass("origin-"+i.originVal)}}),$("#pane-cal-ingredients div.search-box").html('<label>查找:<input type="search" class="form-control input-sm" placeholder="名字 来源"></label>'),$.fn.dataTableExt.afnFiltering.push(function(e,i,c){if(e.nTable!=document.getElementById("cal-ingredients-table"))return!0;for(var a=$("#pane-cal-ingredients .search-box input").val(),t=[2,4],l=0,s=t.length;l<s;l++)if(i[t[l]].indexOf(a)!==-1)return!0;return!1}),$(".chk-cal-ingredients-show").click(function(){initCalIngredientsShow(calIngredientsTable)}),$('.chk-cal-ingredients-origin input[type="checkbox"]').click(function(){$("#chk-cal-ingredients-origin-greenhouse").prop("checked")?calIngredientsTable.rows(".origin-1").select():calIngredientsTable.rows(".origin-1").deselect(),$("#chk-cal-ingredients-origin-garden").prop("checked")?calIngredientsTable.rows(".origin-2").select():calIngredientsTable.rows(".origin-2").deselect(),$("#chk-cal-ingredients-origin-forest").prop("checked")?calIngredientsTable.rows(".origin-3").select():calIngredientsTable.rows(".origin-3").deselect(),$("#chk-cal-ingredients-origin-chicken").prop("checked")?calIngredientsTable.rows(".origin-4").select():calIngredientsTable.rows(".origin-4").deselect(),$("#chk-cal-ingredients-origin-pork").prop("checked")?calIngredientsTable.rows(".origin-5").select():calIngredientsTable.rows(".origin-5").deselect(),$("#chk-cal-ingredients-origin-beef").prop("checked")?calIngredientsTable.rows(".origin-6").select():calIngredientsTable.rows(".origin-6").deselect(),$("#chk-cal-ingredients-origin-wheat").prop("checked")?calIngredientsTable.rows(".origin-7").select():calIngredientsTable.rows(".origin-7").deselect(),$("#chk-cal-ingredients-origin-fish").prop("checked")?calIngredientsTable.rows(".origin-8").select():calIngredientsTable.rows(".origin-8").deselect()}),$("#chk-cal-ingredients-addition").change(function(){initCalIngredientsShow(calIngredientsTable),$(this).prop("checked")?$("#chk-cal-ingredients-addition-wrapper").removeClass("hidden"):$("#chk-cal-ingredients-addition-wrapper").addClass("hidden")}),$("#btn-cal-ingredients-addition-clear").click(function(){calIngredientsTable.rows().nodes().to$().find(".input-addition").val("")}),$("#pane-cal-ingredients .search-box input").keyup(function(){calIngredientsTable.draw()}),$("#btn-cal-ingredients-select-all").click(function(){calIngredientsTable.rows().select()}),$("#btn-cal-ingredients-deselect-all").click(function(){calIngredientsTable.rows().deselect()}),calIngredientsTable.rows().select(),initCalIngredientsShow(calIngredientsTable)}function initCalResultsTable(){var e=[{data:void 0,defaultContent:"",className:"select-checkbox",orderDataType:"dom-selected",width:"30px"},{data:"chef.name"},{data:{_:"chef.fire",display:"chef.fireDisp"}},{data:"chef.sex"},{data:"chef.stirfry"},{data:"chef.boil"},{data:"chef.cut"},{data:"chef.fry"},{data:"chef.roast"},{data:"chef.steam"},{data:"recipe.data.name"},{data:{_:"recipe.data.fire",display:"recipe.data.fireDisp"}},{data:"recipe.data.stirfry"},{data:"recipe.data.boil"},{data:"recipe.data.cut"},{data:"recipe.data.fry"},{data:"recipe.data.roast"},{data:"recipe.data.steam"},{data:{_:"recipe.data.ingredientsVal",display:"recipe.data.ingredientsDisp"}},{data:"recipe.data.price"},{data:"recipe.quantity"},{data:{_:"recipe.qualityVal",display:"recipe.qualityDisp"}},{data:{_:"recipe.qualityAddition",display:"recipe.qualityAdditionDisp"}},{data:{_:"recipe.skillAddition",display:"recipe.skillAdditionDisp"}},{data:{_:"recipe.otherAddition",display:"recipe.otherAdditionDisp"}},{data:"recipe.totalPrice"},{data:"recipe.realTotalPrice"},{data:"recipe.bonusScore"},{data:"recipe.totalScore"}],i=function(e,i,c){if(e.nTable!=document.getElementById("cal-results-table"))return!0;for(var a=$("#pane-cal-results .search-box input").val(),t=[1,10,18],l=0,s=t.length;l<s;l++)if(i[t[l]].indexOf(a)!==-1)return!0;return!1},c=function(e,i,c){if(e.nTable!=document.getElementById("cal-results-table"))return!0;if($("#chk-cal-results-show-selected").prop("checked")){var a=e.aoData[c].nTr;return!!$(a).hasClass("selected")}return!0};$(".btn-cal-results-cal").click(function(){var a="";if("btn-cal-results-cal-all"==this.id?a="all":"btn-cal-results-cal-optimal"==this.id?a="optimal":"btn-cal-results-cal-stop"==this.id&&(a="stop"),"stop"!=a&&($(".btn-cal-results-cal").prop("disabled",!0),$("#btn-cal-results-cal-stop").prop("disabled",!1),$(".cal-results-wrapper").addClass("hidden"),$(".cal-results-progress .progress-bar").css("width","0%"),$(".cal-results-progress .progress-bar span").text("预处理中"),$(".cal-results-progress").removeClass("hidden")),"undefined"!=typeof calWorker&&(calWorker.terminate(),calWorker=void 0),"stop"!=a){calWorker=new Worker("js/cal.min.js"),calWorker.onmessage=function(t){t.data.progress?($(".cal-results-progress .progress-bar").css("width",t.data.progress.value+"%"),$(".cal-results-progress .progress-bar span").text(t.data.progress.display)):t.data.menu&&($("#btn-cal-results-cal-stop").prop("disabled",!0),setTimeout(function(){$(".cal-results-progress .progress-bar span").text("加载中")},500),setTimeout(function(){calResultsTable&&($.fn.dataTableExt.afnFiltering.splice($.fn.dataTableExt.afnFiltering.indexOf(i),1),$.fn.dataTableExt.afnFiltering.splice($.fn.dataTableExt.afnFiltering.indexOf(c),1),calResultsTable.destroy()),calResultsTable=$("#cal-results-table").DataTable({data:t.data.menu,columns:e,language:{search:"查找:",lengthMenu:"一页显示 _MENU_ 个",zeroRecords:"没有找到",info:"共 _MAX_ 个",infoEmpty:"没有数据",infoFiltered:"",select:{rows:{_:"选择了 %d 个",0:"选择了 %d 个",1:"选择了 %d 个"}}},pagingType:"numbers",lengthMenu:[[10,20,50,100,-1],[10,20,50,100,"所有"]],pageLength:20,dom:"<'row'<'col-sm-12'<'selected-sum'>>><'row'<'col-sm-4'l><'col-sm-4 text-center'i><'col-sm-4'<'search-box'>>><'row'<'col-sm-12'tr>><'row'<'col-sm-12'p>>",select:{style:"multi"},autoWidth:!1,order:[[28,"desc"]]}),$("#pane-cal-results div.search-box").html('<label>查找:<input type="search" class="form-control input-sm" placeholder="厨师 菜名 材料"></label>'),$("#pane-cal-results .selected-sum").html("点击列可选择"),$.fn.dataTableExt.afnFiltering.push(i),$.fn.dataTableExt.afnFiltering.push(c),calResultsTable.on("select deselect",function(e,i,c,a){var t=i.rows({selected:!0}).indexes(),l=i.cells(t,25).data().reduce(function(e,i){return e+i},0),s=i.cells(t,26).data().reduce(function(e,i){return e+i},0),r=i.cells(t,27).data().reduce(function(e,i){return e+i},0),n=i.cells(t,28).data().reduce(function(e,i){return e+i},0);$("#pane-cal-results .selected-sum").html("原售价："+l+" 实售价："+s+" 规则分："+r+" 总得分："+n),$("#chk-cal-results-show-selected").prop("checked")&&calResultsTable.draw()}),$("#pane-cal-results .search-box input").keyup(function(){calResultsTable.draw()});var l="",s="";$("#chk-cal-results-show-selected").change(function(){$("#chk-cal-results-show-selected").prop("checked")?(s=$("#pane-cal-results .search-box input").val(),$("#pane-cal-results .search-box input").val(l)):(l=$("#pane-cal-results .search-box input").val(),$("#pane-cal-results .search-box input").val(s)),calResultsTable.draw()}),$(".chk-cal-results-show").off("click").click(function(){initCalResultsShow(calResultsTable)}),$("#chk-cal-results-show-all").off("click").click(function(){$(".chk-cal-results-show:checked").length==$(".chk-cal-results-show").length?$(".chk-cal-results-show").prop("checked",!1):$(".chk-cal-results-show").prop("checked",!0),initCalResultsShow(calResultsTable)}),initCalResultsShow(calResultsTable),"optimal"==a?($(".chk-cal-results-show-selected-wrapper").addClass("hidden"),calResultsTable.rows().select()):"all"==a&&$(".chk-cal-results-show-selected-wrapper").removeClass("hidden"),$(".cal-results-progress").addClass("hidden"),$(".cal-results-wrapper").removeClass("hidden"),$(".btn-cal-results-cal").prop("disabled",!1),$("#btn-cal-results-cal-stop").prop("disabled",!0)},1e3))};var t=new Array,l=$("#chk-cal-recipes-addition").prop("checked");calRecipesTable.rows({selected:!0}).every(function(e,i,c){var a=this.data();l?a.addition=$(this.node()).find(".input-addition").val():a.addition="",t.push(a)});var s=new Array,r=$("#chk-cal-chefs-addition").prop("checked");calChefsTable.rows({selected:!0}).every(function(e,i,c){var a=this.data();r?a.addition=$(this.node()).find(".input-addition").val():a.addition="",s.push(a)});var n=new Array,o=$("#chk-cal-ingredients-addition").prop("checked");calIngredientsTable.rows({selected:!0}).every(function(e,i,c){var a=this.data();o?a.addition=$(this.node()).find(".input-addition").val():a.addition="",n.push(a)});var d=$("#chk-cal-ingredients-addition-cumulative").prop("checked"),p=$("#input-cal-results-show-top").val(),h=$("#chk-cal-recipes-mulitple").prop("checked");calWorker.postMessage({recipes:t,chefs:s,ingredients:n,mode:a,limit:p,recipesMulitple:h,hasRecipesAddition:l,hasChefsAddition:r,hasIngredientsAddition:o,ingredientsAdditionCumulative:d})}else $(".cal-results-progress").addClass("hidden"),$(".btn-cal-results-cal").prop("disabled",!1),$("#btn-cal-results-cal-stop").prop("disabled",!0)})}function generateData(e,c){var a=new Object;a.history=e.history;var t=new Array;for(i in e.ingredients){var l=new Object;l=e.ingredients[i],l.fireDisp=getFireDisp(e.ingredients[i].fire),l.originVal=getOriginVal(e.ingredients[i].origin),t.push(l)}a.ingredients=t;var s=new Array;for(i in e.chefs)if(e.chefs[i].name){var r=new Object;r=e.chefs[i],r.recipes=new Array,r.stirfry=e.chefs[i].stirfry||"",r.boil=e.chefs[i].boil||"",r.cut=e.chefs[i].cut||"",r.fry=e.chefs[i].fry||"",r.roast=e.chefs[i].roast||"",r.steam=e.chefs[i].steam||"",r.meat=e.chefs[i].meat||"",r.wheat=e.chefs[i].wheat||"",r.veg=e.chefs[i].veg||"",r.fish=e.chefs[i].fish||"",r.chefIdDisp=e.chefs[i].chefId+" - "+(e.chefs[i].chefId+2),r.fireDisp=getFireDisp(e.chefs[i].fire);var o="",d="";for(j in e.chefs[i].skill)o+=e.chefs[i].skill[j].type+" ",e.chefs[i].skill[j].addition&&(o+=100*e.chefs[i].skill[j].addition+"% "),d=e.chefs[i].skill[j].type;r.specialSkillVal=d,r.specialSkillDisp=o,s.push(r)}a.chefs=s;var p=new Array;for(i in e.recipes)if(e.recipes[i].name){var h=new Object;h=e.recipes[i],h.stirfry=e.recipes[i].stirfry||"",h.boil=e.recipes[i].boil||"",h.cut=e.recipes[i].cut||"",h.fry=e.recipes[i].fry||"",h.roast=e.recipes[i].roast||"",h.steam=e.recipes[i].steam||"",h.price=e.recipes[i].price||"",h.total=e.recipes[i].total||"",h.timeDisp=secondsToTime(e.recipes[i].time),h.fireDisp=getFireDisp(e.recipes[i].fire);var f=0,u=0,k=0;e.recipes[i].price>0&&e.recipes[i].time>0&&(k=3600*e.recipes[i].price/e.recipes[i].time,e.recipes[i].total>0&&(f=e.recipes[i].price*e.recipes[i].total,u=e.recipes[i].time*e.recipes[i].total)),h.totalPrice=f?f:"",h.totalTime=u,h.totalTimeDisp=secondsToTime(u),h.efficiency=k?Math.floor(k):"";var b=getIngredientsInfo(e.recipes[i]);h.ingredientsVal=b.ingredientsVal,h.ingredientsDisp=b.ingredientsDisp;var $=0;e.recipes[i].time>0&&($=3600*b.ingredientsCount/e.recipes[i].time),h.ingredientsEff=$?Math.floor($):"";var w="",v="";for(g in e.recipes[i].guests)if(e.recipes[i].guests[g].guest){if(c&&("优"==e.recipes[i].quality&&"优"==e.recipes[i].guests[g].quality||"特"==e.recipes[i].quality&&"神"!=e.recipes[i].guests[g].quality||"神"==e.recipes[i].quality))continue;w+=e.recipes[i].guests[g].quality+"-"+e.recipes[i].guests[g].guest+"<br>",v+=e.recipes[i].guests[g].guest}h.levelGuestsVal=v,h.levelGuestsDisp=w;var y="";for(m in e.guests)for(n in e.guests[m].gifts)if(e.recipes[i].name==e.guests[m].gifts[n].recipe){y+=e.guests[m].name+"-"+e.guests[m].gifts[n].rune+"<br>";break}h.guestsDisp=y,h.chefs=new Array;for(j in a.chefs){var T=getQualityInfo(e.recipes[i],a.chefs[j]),x=0;if(T.qualityVal>0){var C=getChefSkillAddition(e.recipes[i],a.chefs[j],a.ingredients);k>0&&(x=(1+T.qualityAddition+C+(c?e.furniture:0))*k)}var M=new Object;M.qualityVal=T.qualityVal,M.qualityDisp=T.qualityDisp,M.efficiency=Math.floor(x)||"",h.chefs.push(M);var R=new Object;R.qualityVal=T.qualityVal,R.qualityDisp=T.qualityDisp,a.chefs[j].recipes.push(R)}p.push(h)}return a.recipes=p,a}function generateCalRecipeData(e){var c=new Array;for(i in e.recipes)e.recipes[i].price&&c.push(e.recipes[i]);return c}function getQualityInfo(e,i){var c=Number.MAX_VALUE;e.stirfry>0&&(c=i.stirfry>0?Math.min(c,i.stirfry/e.stirfry):0),c>=1&&e.boil>0&&(c=i.boil>0?Math.min(c,i.boil/e.boil):0),c>=1&&e.cut>0&&(c=i.cut>0?Math.min(c,i.cut/e.cut):0),c>=1&&e.fry>0&&(c=i.fry>0?Math.min(c,i.fry/e.fry):0),c>=1&&e.roast>0&&(c=i.roast>0?Math.min(c,i.roast/e.roast):0),c>=1&&e.steam>0&&(c=i.steam>0?Math.min(c,i.steam/e.steam):0);var a=new Object,t=0,l="-",s=0;return c!=Number.MAX_VALUE&&c>=1&&(c>=4?(t=.5,l="神",s=4):c>=3?(t=.3,l="特",s=3):c>=2?(t=.1,l="优",s=2):c>=1&&(t=0,l="可",s=1)),a.qualityAddition=t,a.qualityDisp=l,a.qualityVal=s,a}function getIngredientsInfo(e){var i=new Object,c="",a="",t=0;for(var l in e.ingredients)e.ingredients[l].name&&(c+=e.ingredients[l].name+"*"+e.ingredients[l].quantity+" ",a+=e.ingredients[l].name,t+=e.ingredients[l].quantity);return i.ingredientsDisp=c,i.ingredientsVal=a,i.ingredientsCount=t,i}function getChefSkillAddition(e,i,c){var a=0;if(i.hasOwnProperty("skill"))for(var t in i.skill){var l=!1;if(i.skill[t].type.indexOf("水产")>=0)for(var s in e.ingredients)for(var r in c)if(e.ingredients[s].name==c[r].name&&"鱼塘"==c[r].origin){
l=!0;break}if(i.skill[t].type.indexOf("面")>=0)for(var s in e.ingredients)for(var r in c)if(e.ingredients[s].name==c[r].name&&"作坊"==c[r].origin){l=!0;break}if(i.skill[t].type.indexOf("肉")>=0)for(var s in e.ingredients)for(var r in c)if(e.ingredients[s].name==c[r].name&&("牧场"==c[r].origin||"鸡舍"==c[r].origin||"猪圈"==c[r].origin)){l=!0;break}if(i.skill[t].type.indexOf("蔬菜")>=0)for(var s in e.ingredients)for(var r in c)if(e.ingredients[s].name==c[r].name&&("菜棚"==c[r].origin||"菜地"==c[r].origin||"森林"==c[r].origin)){l=!0;break}i.skill[t].type.indexOf("炒")>=0&&e.stirfry>0&&(l=!0),i.skill[t].type.indexOf("煮")>=0&&e.boil>0&&(l=!0),i.skill[t].type.indexOf("炸")>=0&&e.fry>0&&(l=!0),i.skill[t].type.indexOf("切")>=0&&e.cut>0&&(l=!0),i.skill[t].type.indexOf("烤")>=0&&e.roast>0&&(l=!0),i.skill[t].type.indexOf("蒸")>=0&&e.steam>0&&(l=!0),i.skill[t].type.indexOf("金币")>=0&&(l=!0),l&&(a+=i.skill[t].addition)}return a}function getFireDisp(e){for(var i="",c=0;c<e;c++)i+="&#x2605;";return i}function getOriginVal(e){var i=0;return"菜棚"==e?i=1:"菜地"==e?i=2:"森林"==e?i=3:"鸡舍"==e?i=4:"猪圈"==e?i=5:"牧场"==e?i=6:"作坊"==e?i=7:"鱼塘"==e&&(i=8),i}function initRecipeShow(e,i,c){e.column(0).visible($("#chk-recipe-show-id").prop("checked"),!1),e.column(2).visible($("#chk-recipe-show-fire").prop("checked"),!1);var a=$("#chk-recipe-show-skill").prop("checked");e.column(3).visible(a,!1),e.column(4).visible(a,!1),e.column(5).visible(a,!1),e.column(6).visible(a,!1),e.column(7).visible(a,!1),e.column(8).visible(a,!1),e.column(9).visible($("#chk-recipe-show-ingredients").prop("checked"),!1),e.column(10).visible($("#chk-recipe-show-price").prop("checked"),!1),e.column(11).visible($("#chk-recipe-show-time").prop("checked"),!1),e.column(12).visible($("#chk-recipe-show-total").prop("checked"),!1),e.column(13).visible($("#chk-recipe-show-total-price").prop("checked"),!1),e.column(14).visible($("#chk-recipe-show-total-time").prop("checked"),!1),e.column(15).visible($("#chk-recipe-show-efficiency").prop("checked"),!1),e.column(16).visible($("#chk-recipe-show-ingredients-efficiency").prop("checked"),!1),e.column(17).visible($("#chk-recipe-show-origin").prop("checked"),!1),e.column(18).visible($("#chk-recipe-show-unlock").prop("checked"),!1),e.column(19).visible($("#chk-recipe-show-guest").prop("checked"),!1),e.column(20).visible($("#chk-recipe-show-level-guest").prop("checked"),!1),e.column(21).visible($("#chk-recipe-show-god-rune").prop("checked"),!1),c?e.column(22).visible($("#chk-recipe-show-quality").prop("checked"),!1):e.column(22).visible(!1,!1);var t=$("#chk-recipe-show-chef").val();for(j=0;j<i.chefs.length;j++)e.column(23+2*j).visible(t.indexOf(j.toString())>-1,!1),e.column(24+2*j).visible(t.indexOf(j.toString())>-1,!1);e.columns.adjust().draw(!1)}function initChefShow(e,i){e.column(0).visible($("#chk-chef-show-id").prop("checked"),!1),e.column(2).visible($("#chk-chef-show-fire").prop("checked"),!1);var c=$("#chk-chef-show-skill").prop("checked");e.column(3).visible(c,!1),e.column(4).visible(c,!1),e.column(5).visible(c,!1),e.column(6).visible(c,!1),e.column(7).visible(c,!1),e.column(8).visible(c,!1),e.column(9).visible($("#chk-chef-show-special-skill").prop("checked"),!1);var a=$("#chk-chef-show-harvest").prop("checked");e.column(10).visible(a,!1),e.column(11).visible(a,!1),e.column(12).visible(a,!1),e.column(13).visible(a,!1),e.column(14).visible($("#chk-chef-show-sex").prop("checked"),!1),e.column(15).visible($("#chk-chef-show-origin").prop("checked"),!1);var t=$("#chk-chef-show-recipe").val();for(j=0;j<i.recipes.length;j++)e.column(16+j).visible(t.indexOf(j.toString())>-1,!1);e.columns.adjust().draw(!1)}function initCalRecipesShow(e){e.column(1).visible($("#chk-cal-recipes-show-id").prop("checked"),!1),e.column(3).visible($("#chk-cal-recipes-show-fire").prop("checked"),!1);var i=$("#chk-cal-recipes-show-skill").prop("checked");e.column(4).visible(i,!1),e.column(5).visible(i,!1),e.column(6).visible(i,!1),e.column(7).visible(i,!1),e.column(8).visible(i,!1),e.column(9).visible(i,!1),e.column(10).visible($("#chk-cal-recipes-show-ingredient").prop("checked"),!1),e.column(11).visible($("#chk-cal-recipes-show-price").prop("checked"),!1),e.column(12).visible($("#chk-cal-recipes-show-total").prop("checked"),!1),e.column(13).visible($("#chk-cal-recipes-show-total-price").prop("checked"),!1),e.column(14).visible($("#chk-cal-recipes-show-origin").prop("checked"),!1),e.column(15).visible($("#chk-cal-recipes-addition").prop("checked"),!1),e.columns.adjust().draw(!1)}function initCalChefsShow(e){e.column(1).visible($("#chk-cal-chefs-show-id").prop("checked"),!1),e.column(3).visible($("#chk-cal-chefs-show-fire").prop("checked"),!1);var i=$("#chk-cal-chefs-show-skill").prop("checked");e.column(4).visible(i,!1),e.column(5).visible(i,!1),e.column(6).visible(i,!1),e.column(7).visible(i,!1),e.column(8).visible(i,!1),e.column(9).visible(i,!1),e.column(10).visible($("#chk-cal-chefs-show-special-skill").prop("checked"),!1),e.column(11).visible($("#chk-cal-chefs-show-sex").prop("checked"),!1),e.column(12).visible($("#chk-cal-chefs-show-origin").prop("checked"),!1),e.column(13).visible($("#chk-cal-chefs-addition").prop("checked"),!1),e.columns.adjust().draw(!1)}function initCalIngredientsShow(e){e.column(1).visible($("#chk-cal-ingredients-show-id").prop("checked"),!1),e.column(3).visible($("#chk-cal-ingredients-show-fire").prop("checked"),!1),e.column(4).visible($("#chk-cal-ingredients-show-origin").prop("checked"),!1),e.column(5).visible($("#chk-cal-ingredients-addition").prop("checked"),!1),e.columns.adjust().draw(!1)}function initCalResultsShow(e){e.column(2).visible($("#chk-cal-results-show-chef-fire").prop("checked"),!1),e.column(3).visible($("#chk-cal-results-show-chef-sex").prop("checked"),!1);var i=$("#chk-cal-results-show-chef-skill").prop("checked");e.column(4).visible(i,!1),e.column(5).visible(i,!1),e.column(6).visible(i,!1),e.column(7).visible(i,!1),e.column(8).visible(i,!1),e.column(9).visible(i,!1),e.column(11).visible($("#chk-cal-results-show-recipe-fire").prop("checked"),!1);var c=$("#chk-cal-results-show-recipe-skill").prop("checked");e.column(12).visible(c,!1),e.column(13).visible(c,!1),e.column(14).visible(c,!1),e.column(15).visible(c,!1),e.column(16).visible(c,!1),e.column(17).visible(c,!1),e.column(18).visible($("#chk-cal-results-show-recipe-ingredient").prop("checked"),!1),e.column(21).visible($("#chk-cal-results-show-recipe-quality").prop("checked"),!1),e.column(25).visible($("#chk-cal-results-show-recipe-total-price").prop("checked"),!1),e.column(26).visible($("#chk-cal-results-show-recipe-real-total-price").prop("checked"),!1),e.column(27).visible($("#chk-cal-results-show-recipe-bonus-score").prop("checked"),!1),e.columns.adjust().draw(!1)}function initInfo(e){$("#pagination-history").pagination({dataSource:e.history,callback:function(e,i){var c=historyTemplate(e);$("#data-history").html(c)},pageSize:10,showPageNumbers:!1,showNavigator:!1,showPrevious:!1,showNext:!1})}function historyTemplate(e){var i="";return $.each(e,function(e,c){i+="<p>"+c+"</p>"}),i}function secondsToTime(e){e=Number(e);var i=Math.floor(e/3600/24),c=Math.floor(e/3600%24),a=Math.floor(e/60%60),t=Math.floor(e%60),l="";return i>0&&(l+=i+"天"),c>0&&(l+=c+"小时"),a>0&&(l+=a+"分"),t>0&&(l+=t+"秒"),l}var calWorker,calRecipesTable,calChefsTable,calIngredientsTable,calResultsTable;